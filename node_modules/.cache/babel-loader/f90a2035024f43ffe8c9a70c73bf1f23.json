{"ast":null,"code":"import _defineProperty from \"/Users/stoneye/react_project/circle-app-react-hook/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _slicedToArray from \"/Users/stoneye/react_project/circle-app-react-hook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useRef } from 'react';\nimport classNames from 'classnames';\nimport { animated } from '@react-spring/web';\nimport { withNativeProps } from '../../utils/native-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { useResizeEffect } from '../../utils/use-resize-effect';\nimport { useTabListScroll } from '../../utils/use-tab-list-scroll';\nimport ScrollMask from '../scroll-mask';\nimport { ShouldRender } from '../../utils/should-render';\nimport { traverseReactNode } from '../../utils/traverse-react-node';\nvar classPrefix = \"adm-jumbo-tabs\";\nexport var JumboTab = function JumboTab() {\n  return null;\n};\nexport var JumboTabs = function JumboTabs(props) {\n  var _a;\n\n  var tabListContainerRef = useRef(null);\n  var rootRef = useRef(null);\n  var keyToIndexRecord = {};\n  var firstActiveKey = null;\n  var panes = [];\n  traverseReactNode(props.children, function (child, index) {\n    if (!React.isValidElement(child)) return;\n    var key = child.key;\n    if (typeof key !== 'string') return;\n\n    if (index === 0) {\n      firstActiveKey = key;\n    }\n\n    var length = panes.push(child);\n    keyToIndexRecord[key] = length - 1;\n  });\n\n  var _usePropsValue = usePropsValue({\n    value: props.activeKey,\n    defaultValue: (_a = props.defaultActiveKey) !== null && _a !== void 0 ? _a : firstActiveKey,\n    onChange: function onChange(v) {\n      var _a;\n\n      if (v === null) return;\n      (_a = props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, v);\n    }\n  }),\n      _usePropsValue2 = _slicedToArray(_usePropsValue, 2),\n      activeKey = _usePropsValue2[0],\n      setActiveKey = _usePropsValue2[1];\n\n  var _useTabListScroll = useTabListScroll(tabListContainerRef, keyToIndexRecord[activeKey]),\n      scrollLeft = _useTabListScroll.scrollLeft,\n      animate = _useTabListScroll.animate;\n\n  useResizeEffect(function () {\n    animate(true);\n  }, rootRef);\n  return withNativeProps(props, React.createElement(\"div\", {\n    className: classPrefix,\n    ref: rootRef\n  }, React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-header\")\n  }, React.createElement(ScrollMask, {\n    scrollTrackRef: tabListContainerRef\n  }), React.createElement(animated.div, {\n    className: \"\".concat(classPrefix, \"-tab-list\"),\n    ref: tabListContainerRef,\n    scrollLeft: scrollLeft\n  }, panes.map(function (pane) {\n    var _classNames;\n\n    return withNativeProps(pane.props, React.createElement(\"div\", {\n      key: pane.key,\n      className: \"\".concat(classPrefix, \"-tab-wrapper\")\n    }, React.createElement(\"div\", {\n      onClick: function onClick() {\n        var key = pane.key;\n        if (pane.props.disabled) return;\n\n        if (key === undefined || key === null) {\n          return;\n        }\n\n        setActiveKey(key.toString());\n      },\n      className: classNames(\"\".concat(classPrefix, \"-tab\"), (_classNames = {}, _defineProperty(_classNames, \"\".concat(classPrefix, \"-tab-active\"), pane.key === activeKey), _defineProperty(_classNames, \"\".concat(classPrefix, \"-tab-disabled\"), pane.props.disabled), _classNames))\n    }, React.createElement(\"div\", {\n      className: \"\".concat(classPrefix, \"-tab-title\")\n    }, pane.props.title), React.createElement(\"div\", {\n      className: \"\".concat(classPrefix, \"-tab-description\")\n    }, pane.props.description))));\n  }))), panes.map(function (pane) {\n    if (pane.props.children === undefined) {\n      return null;\n    }\n\n    var active = pane.key === activeKey;\n    return React.createElement(ShouldRender, {\n      key: pane.key,\n      active: active,\n      forceRender: pane.props.forceRender,\n      destroyOnClose: pane.props.destroyOnClose\n    }, React.createElement(\"div\", {\n      className: \"\".concat(classPrefix, \"-content\"),\n      style: {\n        display: active ? 'block' : 'none'\n      }\n    }, pane.props.children));\n  })));\n};","map":{"version":3,"names":["React","useRef","classNames","animated","withNativeProps","usePropsValue","useResizeEffect","useTabListScroll","ScrollMask","ShouldRender","traverseReactNode","classPrefix","JumboTab","JumboTabs","props","_a","tabListContainerRef","rootRef","keyToIndexRecord","firstActiveKey","panes","children","child","index","isValidElement","key","length","push","value","activeKey","defaultValue","defaultActiveKey","onChange","v","call","setActiveKey","scrollLeft","animate","createElement","className","ref","scrollTrackRef","div","map","pane","onClick","disabled","undefined","toString","title","description","active","forceRender","destroyOnClose","style","display"],"sources":["/Users/stoneye/react_project/circle-app-react-hook/node_modules/antd-mobile/es/components/jumbo-tabs/jumbo-tabs.js"],"sourcesContent":["import React, { useRef } from 'react';\nimport classNames from 'classnames';\nimport { animated } from '@react-spring/web';\nimport { withNativeProps } from '../../utils/native-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { useResizeEffect } from '../../utils/use-resize-effect';\nimport { useTabListScroll } from '../../utils/use-tab-list-scroll';\nimport ScrollMask from '../scroll-mask';\nimport { ShouldRender } from '../../utils/should-render';\nimport { traverseReactNode } from '../../utils/traverse-react-node';\nconst classPrefix = `adm-jumbo-tabs`;\nexport const JumboTab = () => {\n  return null;\n};\nexport const JumboTabs = props => {\n  var _a;\n\n  const tabListContainerRef = useRef(null);\n  const rootRef = useRef(null);\n  const keyToIndexRecord = {};\n  let firstActiveKey = null;\n  const panes = [];\n  traverseReactNode(props.children, (child, index) => {\n    if (!React.isValidElement(child)) return;\n    const key = child.key;\n    if (typeof key !== 'string') return;\n\n    if (index === 0) {\n      firstActiveKey = key;\n    }\n\n    const length = panes.push(child);\n    keyToIndexRecord[key] = length - 1;\n  });\n  const [activeKey, setActiveKey] = usePropsValue({\n    value: props.activeKey,\n    defaultValue: (_a = props.defaultActiveKey) !== null && _a !== void 0 ? _a : firstActiveKey,\n    onChange: v => {\n      var _a;\n\n      if (v === null) return;\n      (_a = props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, v);\n    }\n  });\n  const {\n    scrollLeft,\n    animate\n  } = useTabListScroll(tabListContainerRef, keyToIndexRecord[activeKey]);\n  useResizeEffect(() => {\n    animate(true);\n  }, rootRef);\n  return withNativeProps(props, React.createElement(\"div\", {\n    className: classPrefix,\n    ref: rootRef\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-header`\n  }, React.createElement(ScrollMask, {\n    scrollTrackRef: tabListContainerRef\n  }), React.createElement(animated.div, {\n    className: `${classPrefix}-tab-list`,\n    ref: tabListContainerRef,\n    scrollLeft: scrollLeft\n  }, panes.map(pane => withNativeProps(pane.props, React.createElement(\"div\", {\n    key: pane.key,\n    className: `${classPrefix}-tab-wrapper`\n  }, React.createElement(\"div\", {\n    onClick: () => {\n      const {\n        key\n      } = pane;\n      if (pane.props.disabled) return;\n\n      if (key === undefined || key === null) {\n        return;\n      }\n\n      setActiveKey(key.toString());\n    },\n    className: classNames(`${classPrefix}-tab`, {\n      [`${classPrefix}-tab-active`]: pane.key === activeKey,\n      [`${classPrefix}-tab-disabled`]: pane.props.disabled\n    })\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-tab-title`\n  }, pane.props.title), React.createElement(\"div\", {\n    className: `${classPrefix}-tab-description`\n  }, pane.props.description))))))), panes.map(pane => {\n    if (pane.props.children === undefined) {\n      return null;\n    }\n\n    const active = pane.key === activeKey;\n    return React.createElement(ShouldRender, {\n      key: pane.key,\n      active: active,\n      forceRender: pane.props.forceRender,\n      destroyOnClose: pane.props.destroyOnClose\n    }, React.createElement(\"div\", {\n      className: `${classPrefix}-content`,\n      style: {\n        display: active ? 'block' : 'none'\n      }\n    }, pane.props.children));\n  })));\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}