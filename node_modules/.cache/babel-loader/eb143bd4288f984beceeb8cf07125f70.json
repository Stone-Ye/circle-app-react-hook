{"ast":null,"code":"import _toConsumableArray from \"/Users/stoneye/react_project/circle-app-react-hook/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Users/stoneye/react_project/circle-app-react-hook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { forwardRef, useImperativeHandle, useRef } from 'react';\nimport { useIsomorphicLayoutEffect } from 'ahooks';\nimport { withNativeProps } from '../../utils/native-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { devError } from '../../utils/dev-log';\nvar classPrefix = 'adm-text-area';\nvar defaultProps = {\n  rows: 2,\n  showCount: false,\n  autoSize: false,\n  defaultValue: ''\n};\nexport var TextArea = forwardRef(function (p, ref) {\n  var props = mergeProps(defaultProps, p);\n  var autoSize = props.autoSize,\n      showCount = props.showCount,\n      maxLength = props.maxLength;\n\n  var _usePropsValue = usePropsValue(Object.assign(Object.assign({}, props), {\n    value: props.value === null ? '' : props.value\n  })),\n      _usePropsValue2 = _slicedToArray(_usePropsValue, 2),\n      value = _usePropsValue2[0],\n      setValue = _usePropsValue2[1];\n\n  if (props.value === null) {\n    devError('TextArea', '`value` prop on `TextArea` should not be `null`. Consider using an empty string to clear the component.');\n  }\n\n  var nativeTextAreaRef = useRef(null);\n  useImperativeHandle(ref, function () {\n    return {\n      clear: function clear() {\n        setValue('');\n      },\n      focus: function focus() {\n        var _a;\n\n        (_a = nativeTextAreaRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n      },\n      blur: function blur() {\n        var _a;\n\n        (_a = nativeTextAreaRef.current) === null || _a === void 0 ? void 0 : _a.blur();\n      },\n\n      get nativeElement() {\n        return nativeTextAreaRef.current;\n      }\n\n    };\n  });\n  useIsomorphicLayoutEffect(function () {\n    if (!autoSize) return;\n    var textArea = nativeTextAreaRef.current;\n    if (!textArea) return;\n    textArea.style.height = 'auto';\n    var height = textArea.scrollHeight;\n\n    if (typeof autoSize === 'object') {\n      var computedStyle = window.getComputedStyle(textArea);\n      var lineHeight = parseFloat(computedStyle.lineHeight);\n\n      if (autoSize.minRows) {\n        height = Math.max(height, autoSize.minRows * lineHeight);\n      }\n\n      if (autoSize.maxRows) {\n        height = Math.min(height, autoSize.maxRows * lineHeight);\n      }\n    }\n\n    textArea.style.height = \"\".concat(height, \"px\");\n  }, [value, autoSize]);\n  var compositingRef = useRef(false);\n  var count;\n\n  var valueLength = _toConsumableArray(value).length;\n\n  if (typeof showCount === 'function') {\n    count = showCount(valueLength, maxLength);\n  } else if (showCount) {\n    count = React.createElement(\"div\", {\n      className: \"\".concat(classPrefix, \"-count\")\n    }, maxLength === undefined ? valueLength : valueLength + '/' + maxLength);\n  }\n\n  return withNativeProps(props, React.createElement(\"div\", {\n    className: classPrefix\n  }, React.createElement(\"textarea\", {\n    ref: nativeTextAreaRef,\n    className: \"\".concat(classPrefix, \"-element\"),\n    rows: props.rows,\n    value: value,\n    placeholder: props.placeholder,\n    onChange: function onChange(e) {\n      var v = e.target.value;\n\n      if (maxLength && !compositingRef.current) {\n        v = _toConsumableArray(v).slice(0, maxLength).join('');\n      }\n\n      setValue(v);\n    },\n    id: props.id,\n    onCompositionStart: function onCompositionStart(e) {\n      var _a;\n\n      compositingRef.current = true;\n      (_a = props.onCompositionStart) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    },\n    onCompositionEnd: function onCompositionEnd(e) {\n      var _a;\n\n      compositingRef.current = false;\n\n      if (maxLength) {\n        var v = e.target.value;\n        setValue(_toConsumableArray(v).slice(0, maxLength).join(''));\n      }\n\n      (_a = props.onCompositionEnd) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    },\n    autoComplete: props.autoComplete,\n    autoFocus: props.autoFocus,\n    disabled: props.disabled,\n    readOnly: props.readOnly,\n    name: props.name,\n    onFocus: props.onFocus,\n    onBlur: props.onBlur,\n    onClick: props.onClick\n  }), count));\n});\nTextArea.defaultProps = defaultProps;","map":{"version":3,"names":["React","forwardRef","useImperativeHandle","useRef","useIsomorphicLayoutEffect","withNativeProps","usePropsValue","mergeProps","devError","classPrefix","defaultProps","rows","showCount","autoSize","defaultValue","TextArea","p","ref","props","maxLength","Object","assign","value","setValue","nativeTextAreaRef","clear","focus","_a","current","blur","nativeElement","textArea","style","height","scrollHeight","computedStyle","window","getComputedStyle","lineHeight","parseFloat","minRows","Math","max","maxRows","min","compositingRef","count","valueLength","length","createElement","className","undefined","placeholder","onChange","e","v","target","slice","join","id","onCompositionStart","call","onCompositionEnd","autoComplete","autoFocus","disabled","readOnly","name","onFocus","onBlur","onClick"],"sources":["/Users/stoneye/react_project/circle-app-react-hook/node_modules/antd-mobile/es/components/text-area/text-area.js"],"sourcesContent":["import React, { forwardRef, useImperativeHandle, useRef } from 'react';\nimport { useIsomorphicLayoutEffect } from 'ahooks';\nimport { withNativeProps } from '../../utils/native-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { devError } from '../../utils/dev-log';\nconst classPrefix = 'adm-text-area';\nconst defaultProps = {\n  rows: 2,\n  showCount: false,\n  autoSize: false,\n  defaultValue: ''\n};\nexport const TextArea = forwardRef((p, ref) => {\n  const props = mergeProps(defaultProps, p);\n  const {\n    autoSize,\n    showCount,\n    maxLength\n  } = props;\n  const [value, setValue] = usePropsValue(Object.assign(Object.assign({}, props), {\n    value: props.value === null ? '' : props.value\n  }));\n\n  if (props.value === null) {\n    devError('TextArea', '`value` prop on `TextArea` should not be `null`. Consider using an empty string to clear the component.');\n  }\n\n  const nativeTextAreaRef = useRef(null);\n  useImperativeHandle(ref, () => ({\n    clear: () => {\n      setValue('');\n    },\n    focus: () => {\n      var _a;\n\n      (_a = nativeTextAreaRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n    },\n    blur: () => {\n      var _a;\n\n      (_a = nativeTextAreaRef.current) === null || _a === void 0 ? void 0 : _a.blur();\n    },\n\n    get nativeElement() {\n      return nativeTextAreaRef.current;\n    }\n\n  }));\n  useIsomorphicLayoutEffect(() => {\n    if (!autoSize) return;\n    const textArea = nativeTextAreaRef.current;\n    if (!textArea) return;\n    textArea.style.height = 'auto';\n    let height = textArea.scrollHeight;\n\n    if (typeof autoSize === 'object') {\n      const computedStyle = window.getComputedStyle(textArea);\n      const lineHeight = parseFloat(computedStyle.lineHeight);\n\n      if (autoSize.minRows) {\n        height = Math.max(height, autoSize.minRows * lineHeight);\n      }\n\n      if (autoSize.maxRows) {\n        height = Math.min(height, autoSize.maxRows * lineHeight);\n      }\n    }\n\n    textArea.style.height = `${height}px`;\n  }, [value, autoSize]);\n  const compositingRef = useRef(false);\n  let count;\n  const valueLength = [...value].length;\n\n  if (typeof showCount === 'function') {\n    count = showCount(valueLength, maxLength);\n  } else if (showCount) {\n    count = React.createElement(\"div\", {\n      className: `${classPrefix}-count`\n    }, maxLength === undefined ? valueLength : valueLength + '/' + maxLength);\n  }\n\n  return withNativeProps(props, React.createElement(\"div\", {\n    className: classPrefix\n  }, React.createElement(\"textarea\", {\n    ref: nativeTextAreaRef,\n    className: `${classPrefix}-element`,\n    rows: props.rows,\n    value: value,\n    placeholder: props.placeholder,\n    onChange: e => {\n      let v = e.target.value;\n\n      if (maxLength && !compositingRef.current) {\n        v = [...v].slice(0, maxLength).join('');\n      }\n\n      setValue(v);\n    },\n    id: props.id,\n    onCompositionStart: e => {\n      var _a;\n\n      compositingRef.current = true;\n      (_a = props.onCompositionStart) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    },\n    onCompositionEnd: e => {\n      var _a;\n\n      compositingRef.current = false;\n\n      if (maxLength) {\n        const v = e.target.value;\n        setValue([...v].slice(0, maxLength).join(''));\n      }\n\n      (_a = props.onCompositionEnd) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    },\n    autoComplete: props.autoComplete,\n    autoFocus: props.autoFocus,\n    disabled: props.disabled,\n    readOnly: props.readOnly,\n    name: props.name,\n    onFocus: props.onFocus,\n    onBlur: props.onBlur,\n    onClick: props.onClick\n  }), count));\n});\nTextArea.defaultProps = defaultProps;"],"mappings":"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"},"metadata":{},"sourceType":"module"}