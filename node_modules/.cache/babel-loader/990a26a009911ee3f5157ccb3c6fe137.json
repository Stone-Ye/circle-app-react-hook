{"ast":null,"code":"import React, { useLayoutEffect, useMemo } from 'react';\nimport { CloseOutline } from 'antd-mobile-icons';\nimport classNames from 'classnames';\nimport Image from '../image';\nimport SpinLoading from '../spin-loading';\nimport { useConfig } from '../config-provider';\nvar classPrefix = \"adm-image-uploader\";\n\nvar PreviewItem = function PreviewItem(props) {\n  var _useConfig = useConfig(),\n      locale = _useConfig.locale;\n\n  var url = props.url,\n      file = props.file,\n      deletable = props.deletable,\n      onDelete = props.onDelete,\n      imageFit = props.imageFit;\n  var src = useMemo(function () {\n    if (url) {\n      return url;\n    }\n\n    if (file) {\n      return URL.createObjectURL(file);\n    }\n\n    return '';\n  }, [url, file]);\n  useLayoutEffect(function () {\n    return function () {\n      URL.revokeObjectURL(src);\n    };\n  }, [src]);\n\n  function renderLoading() {\n    return props.status === 'pending' && React.createElement(\"div\", {\n      className: \"\".concat(classPrefix, \"-cell-mask\")\n    }, React.createElement(\"span\", {\n      className: \"\".concat(classPrefix, \"-cell-loading\")\n    }, React.createElement(SpinLoading, {\n      color: 'white'\n    }), React.createElement(\"span\", {\n      className: \"\".concat(classPrefix, \"-cell-mask-message\")\n    }, locale.ImageUploader.uploading)));\n  }\n\n  function renderDelete() {\n    return deletable && React.createElement(\"span\", {\n      className: \"\".concat(classPrefix, \"-cell-delete\"),\n      onClick: onDelete\n    }, React.createElement(CloseOutline, {\n      className: \"\".concat(classPrefix, \"-cell-delete-icon\")\n    }));\n  }\n\n  return React.createElement(\"div\", {\n    className: classNames(\"\".concat(classPrefix, \"-cell\"), props.status === 'fail' && \"\".concat(classPrefix, \"-cell-fail\"))\n  }, React.createElement(Image, {\n    className: \"\".concat(classPrefix, \"-cell-image\"),\n    src: src,\n    fit: imageFit,\n    onClick: props.onClick\n  }), renderLoading(), renderDelete());\n};\n\nexport default PreviewItem;","map":{"version":3,"names":["React","useLayoutEffect","useMemo","CloseOutline","classNames","Image","SpinLoading","useConfig","classPrefix","PreviewItem","props","locale","url","file","deletable","onDelete","imageFit","src","URL","createObjectURL","revokeObjectURL","renderLoading","status","createElement","className","color","ImageUploader","uploading","renderDelete","onClick","fit"],"sources":["/Users/stoneye/react_project/circle-app-react-hook/node_modules/antd-mobile/es/components/image-uploader/preview-item.js"],"sourcesContent":["import React, { useLayoutEffect, useMemo } from 'react';\nimport { CloseOutline } from 'antd-mobile-icons';\nimport classNames from 'classnames';\nimport Image from '../image';\nimport SpinLoading from '../spin-loading';\nimport { useConfig } from '../config-provider';\nconst classPrefix = `adm-image-uploader`;\n\nconst PreviewItem = props => {\n  const {\n    locale\n  } = useConfig();\n  const {\n    url,\n    file,\n    deletable,\n    onDelete,\n    imageFit\n  } = props;\n  const src = useMemo(() => {\n    if (url) {\n      return url;\n    }\n\n    if (file) {\n      return URL.createObjectURL(file);\n    }\n\n    return '';\n  }, [url, file]);\n  useLayoutEffect(() => {\n    return () => {\n      URL.revokeObjectURL(src);\n    };\n  }, [src]);\n\n  function renderLoading() {\n    return props.status === 'pending' && React.createElement(\"div\", {\n      className: `${classPrefix}-cell-mask`\n    }, React.createElement(\"span\", {\n      className: `${classPrefix}-cell-loading`\n    }, React.createElement(SpinLoading, {\n      color: 'white'\n    }), React.createElement(\"span\", {\n      className: `${classPrefix}-cell-mask-message`\n    }, locale.ImageUploader.uploading)));\n  }\n\n  function renderDelete() {\n    return deletable && React.createElement(\"span\", {\n      className: `${classPrefix}-cell-delete`,\n      onClick: onDelete\n    }, React.createElement(CloseOutline, {\n      className: `${classPrefix}-cell-delete-icon`\n    }));\n  }\n\n  return React.createElement(\"div\", {\n    className: classNames(`${classPrefix}-cell`, props.status === 'fail' && `${classPrefix}-cell-fail`)\n  }, React.createElement(Image, {\n    className: `${classPrefix}-cell-image`,\n    src: src,\n    fit: imageFit,\n    onClick: props.onClick\n  }), renderLoading(), renderDelete());\n};\n\nexport default PreviewItem;"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,eAAhB,EAAiCC,OAAjC,QAAgD,OAAhD;AACA,SAASC,YAAT,QAA6B,mBAA7B;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,OAAOC,WAAP,MAAwB,iBAAxB;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,IAAMC,WAAW,uBAAjB;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAAAC,KAAK,EAAI;EAC3B,iBAEIH,SAAS,EAFb;EAAA,IACEI,MADF,cACEA,MADF;;EAGA,IACEC,GADF,GAMIF,KANJ,CACEE,GADF;EAAA,IAEEC,IAFF,GAMIH,KANJ,CAEEG,IAFF;EAAA,IAGEC,SAHF,GAMIJ,KANJ,CAGEI,SAHF;EAAA,IAIEC,QAJF,GAMIL,KANJ,CAIEK,QAJF;EAAA,IAKEC,QALF,GAMIN,KANJ,CAKEM,QALF;EAOA,IAAMC,GAAG,GAAGf,OAAO,CAAC,YAAM;IACxB,IAAIU,GAAJ,EAAS;MACP,OAAOA,GAAP;IACD;;IAED,IAAIC,IAAJ,EAAU;MACR,OAAOK,GAAG,CAACC,eAAJ,CAAoBN,IAApB,CAAP;IACD;;IAED,OAAO,EAAP;EACD,CAVkB,EAUhB,CAACD,GAAD,EAAMC,IAAN,CAVgB,CAAnB;EAWAZ,eAAe,CAAC,YAAM;IACpB,OAAO,YAAM;MACXiB,GAAG,CAACE,eAAJ,CAAoBH,GAApB;IACD,CAFD;EAGD,CAJc,EAIZ,CAACA,GAAD,CAJY,CAAf;;EAMA,SAASI,aAAT,GAAyB;IACvB,OAAOX,KAAK,CAACY,MAAN,KAAiB,SAAjB,IAA8BtB,KAAK,CAACuB,aAAN,CAAoB,KAApB,EAA2B;MAC9DC,SAAS,YAAKhB,WAAL;IADqD,CAA3B,EAElCR,KAAK,CAACuB,aAAN,CAAoB,MAApB,EAA4B;MAC7BC,SAAS,YAAKhB,WAAL;IADoB,CAA5B,EAEAR,KAAK,CAACuB,aAAN,CAAoBjB,WAApB,EAAiC;MAClCmB,KAAK,EAAE;IAD2B,CAAjC,CAFA,EAICzB,KAAK,CAACuB,aAAN,CAAoB,MAApB,EAA4B;MAC9BC,SAAS,YAAKhB,WAAL;IADqB,CAA5B,EAEDG,MAAM,CAACe,aAAP,CAAqBC,SAFpB,CAJD,CAFkC,CAArC;EASD;;EAED,SAASC,YAAT,GAAwB;IACtB,OAAOd,SAAS,IAAId,KAAK,CAACuB,aAAN,CAAoB,MAApB,EAA4B;MAC9CC,SAAS,YAAKhB,WAAL,iBADqC;MAE9CqB,OAAO,EAAEd;IAFqC,CAA5B,EAGjBf,KAAK,CAACuB,aAAN,CAAoBpB,YAApB,EAAkC;MACnCqB,SAAS,YAAKhB,WAAL;IAD0B,CAAlC,CAHiB,CAApB;EAMD;;EAED,OAAOR,KAAK,CAACuB,aAAN,CAAoB,KAApB,EAA2B;IAChCC,SAAS,EAAEpB,UAAU,WAAII,WAAJ,YAAwBE,KAAK,CAACY,MAAN,KAAiB,MAAjB,cAA8Bd,WAA9B,eAAxB;EADW,CAA3B,EAEJR,KAAK,CAACuB,aAAN,CAAoBlB,KAApB,EAA2B;IAC5BmB,SAAS,YAAKhB,WAAL,gBADmB;IAE5BS,GAAG,EAAEA,GAFuB;IAG5Ba,GAAG,EAAEd,QAHuB;IAI5Ba,OAAO,EAAEnB,KAAK,CAACmB;EAJa,CAA3B,CAFI,EAOHR,aAAa,EAPV,EAOcO,YAAY,EAP1B,CAAP;AAQD,CAzDD;;AA2DA,eAAenB,WAAf"},"metadata":{},"sourceType":"module"}