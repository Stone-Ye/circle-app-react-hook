{"ast":null,"code":"import _slicedToArray from\"/Users/stoneye/react_project/circle-app-react-hook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{SideBar}from'antd-mobile';import{useLocation,useNavigate}from\"react-router-dom\";import styles from'./index.module.css';import{useEffect}from\"react\";// 侧边抽屉组件\nimport{jsx as _jsx}from\"react/jsx-runtime\";export default function Drawermenu(){var storage=window.localStorage;var location=useLocation();var state=location.state;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),categorysData=_useState2[0],setCategorysData=_useState2[1];var navigate=useNavigate();var _useState3=useState('1'),_useState4=_slicedToArray(_useState3,2),curActiveIndex=_useState4[0],setCurActiveIndex=_useState4[1];var onChangeCallback=function onChangeCallback(index){setCurActiveIndex(index);navigate('/home',{replace:true,state:{'curActiveIndex':index}});};useEffect(function(){if(state!=null){console.log('Drawermenu curActiveIndex:',state['curActiveIndex']);setCurActiveIndex(state['curActiveIndex']);}},[location]);useEffect(function(){initCategorysData();},[]);//只执行一次\nvar initCategorysData=function initCategorysData(){if(storage.getItem('categorysData')){setCategorysData(JSON.parse(storage.getItem('categorysData')));}};console.log('Drawermenu curActiveIndex: ',curActiveIndex);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(SideBar,{activeKey:curActiveIndex,onChange:onChangeCallback,children:categorysData.map(function(item){return/*#__PURE__*/_jsx(SideBar.Item,{title:item.title,className:styles.sidebar},item.categoryId);})})});}","map":{"version":3,"names":["React","useState","SideBar","useLocation","useNavigate","styles","useEffect","Drawermenu","storage","window","localStorage","location","state","categorysData","setCategorysData","navigate","curActiveIndex","setCurActiveIndex","onChangeCallback","index","replace","console","log","initCategorysData","getItem","JSON","parse","map","item","title","sidebar","categoryId"],"sources":["/Users/stoneye/react_project/circle-app-react-hook/src/views/Component/Drawermenu/index.js"],"sourcesContent":["import React, { useState } from \"react\"\nimport { SideBar } from 'antd-mobile'\nimport { useLocation, useNavigate } from \"react-router-dom\"\n\nimport styles from './index.module.css'\nimport { useEffect } from \"react\"\n\n// 侧边抽屉组件\nexport default function Drawermenu () {\n\n  let storage = window.localStorage\n  const location = useLocation()\n  const { state } = location\n  const [categorysData, setCategorysData] = useState([])\n  const navigate = useNavigate()\n  const [curActiveIndex, setCurActiveIndex] = useState('1')\n  const onChangeCallback = (index) => {\n    setCurActiveIndex(index)\n    navigate('/home', { replace: true, state: { 'curActiveIndex': index } })\n  }\n\n  useEffect(() => {\n\n    if (state != null) {\n      console.log('Drawermenu curActiveIndex:', state['curActiveIndex'])\n\n      setCurActiveIndex(state['curActiveIndex'])\n    }\n  }, [location])\n\n\n  useEffect(() => {\n    initCategorysData()\n  }, [])  //只执行一次\n\n  const initCategorysData = () => {\n    if (storage.getItem('categorysData')) {\n      setCategorysData(JSON.parse(storage.getItem('categorysData')))\n    }\n  }\n\n\n  console.log('Drawermenu curActiveIndex: ', curActiveIndex)\n  return <div>\n    <SideBar activeKey={curActiveIndex} onChange={onChangeCallback}>\n      {categorysData.map(item => (\n        <SideBar.Item key={item.categoryId}\n          title={item.title}\n          className={styles.sidebar}\n        />\n      ))}\n    </SideBar>\n  </div>\n}\n\n\n"],"mappings":"wIAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,kBAAzC,CAEA,MAAOC,OAAP,KAAmB,oBAAnB,CACA,OAASC,SAAT,KAA0B,OAA1B,CAEA;2CACA,cAAe,SAASC,WAAT,EAAuB,CAEpC,GAAIC,QAAO,CAAGC,MAAM,CAACC,YAArB,CACA,GAAMC,SAAQ,CAAGR,WAAW,EAA5B,CACA,GAAQS,MAAR,CAAkBD,QAAlB,CAAQC,KAAR,CACA,cAA0CX,QAAQ,CAAC,EAAD,CAAlD,wCAAOY,aAAP,eAAsBC,gBAAtB,eACA,GAAMC,SAAQ,CAAGX,WAAW,EAA5B,CACA,eAA4CH,QAAQ,CAAC,GAAD,CAApD,yCAAOe,cAAP,eAAuBC,iBAAvB,eACA,GAAMC,iBAAgB,CAAG,QAAnBA,iBAAmB,CAACC,KAAD,CAAW,CAClCF,iBAAiB,CAACE,KAAD,CAAjB,CACAJ,QAAQ,CAAC,OAAD,CAAU,CAAEK,OAAO,CAAE,IAAX,CAAiBR,KAAK,CAAE,CAAE,iBAAkBO,KAApB,CAAxB,CAAV,CAAR,CACD,CAHD,CAKAb,SAAS,CAAC,UAAM,CAEd,GAAIM,KAAK,EAAI,IAAb,CAAmB,CACjBS,OAAO,CAACC,GAAR,CAAY,4BAAZ,CAA0CV,KAAK,CAAC,gBAAD,CAA/C,EAEAK,iBAAiB,CAACL,KAAK,CAAC,gBAAD,CAAN,CAAjB,CACD,CACF,CAPQ,CAON,CAACD,QAAD,CAPM,CAAT,CAUAL,SAAS,CAAC,UAAM,CACdiB,iBAAiB,GAClB,CAFQ,CAEN,EAFM,CAAT,CAEQ;AAER,GAAMA,kBAAiB,CAAG,QAApBA,kBAAoB,EAAM,CAC9B,GAAIf,OAAO,CAACgB,OAAR,CAAgB,eAAhB,CAAJ,CAAsC,CACpCV,gBAAgB,CAACW,IAAI,CAACC,KAAL,CAAWlB,OAAO,CAACgB,OAAR,CAAgB,eAAhB,CAAX,CAAD,CAAhB,CACD,CACF,CAJD,CAOAH,OAAO,CAACC,GAAR,CAAY,6BAAZ,CAA2CN,cAA3C,EACA,mBAAO,kCACL,KAAC,OAAD,EAAS,SAAS,CAAEA,cAApB,CAAoC,QAAQ,CAAEE,gBAA9C,UACGL,aAAa,CAACc,GAAd,CAAkB,SAAAC,IAAI,qBACrB,KAAC,OAAD,CAAS,IAAT,EACE,KAAK,CAAEA,IAAI,CAACC,KADd,CAEE,SAAS,CAAExB,MAAM,CAACyB,OAFpB,EAAmBF,IAAI,CAACG,UAAxB,CADqB,EAAtB,CADH,EADK,EAAP,CAUD"},"metadata":{},"sourceType":"module"}