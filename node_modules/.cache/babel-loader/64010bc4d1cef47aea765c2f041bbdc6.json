{"ast":null,"code":"import _slicedToArray from \"/Users/stoneye/react_project/circle-app-react-hook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useRef, useState } from 'react';\nimport { useDrag } from '@use-gesture/react';\nimport { ThumbIcon } from './thumb-icon';\nimport { Popover } from '../popover/popover';\nimport { useConfig } from '../config-provider';\nvar classPrefix = \"adm-slider\";\n\nvar Thumb = function Thumb(props) {\n  var value = props.value,\n      min = props.min,\n      max = props.max,\n      disabled = props.disabled,\n      icon = props.icon,\n      residentPopover = props.residentPopover,\n      onDrag = props.onDrag;\n  var prevValue = useRef(value);\n\n  var _useConfig = useConfig(),\n      locale = _useConfig.locale;\n\n  var currentPosition = function currentPosition() {\n    return {\n      left: \"\".concat((value - min) / (max - min) * 100, \"%\"),\n      right: 'auto'\n    };\n  };\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      dragging = _useState2[0],\n      setDragging = _useState2[1];\n\n  var bind = useDrag(function (state) {\n    var _a;\n\n    if (disabled) return;\n\n    if (state.first) {\n      prevValue.current = value;\n    }\n\n    var x = state.xy[0] - state.initial[0];\n    var sliderOffsetWith = (_a = props.trackRef.current) === null || _a === void 0 ? void 0 : _a.offsetWidth;\n    if (!sliderOffsetWith) return;\n    var diff = x / Math.ceil(sliderOffsetWith) * (max - min);\n    onDrag(prevValue.current + diff, state.first, state.last);\n    setDragging(!state.last);\n  }, {\n    axis: 'x',\n    pointer: {\n      touch: true\n    }\n  });\n  var renderPopoverContent = typeof props.popover === 'function' ? props.popover : props.popover ? function (value) {\n    return value.toString();\n  } : null;\n  var thumbElement = React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-thumb\")\n  }, icon ? icon : React.createElement(ThumbIcon, {\n    className: \"\".concat(classPrefix, \"-thumb-icon\")\n  }));\n  return React.createElement(\"div\", Object.assign({\n    className: \"\".concat(classPrefix, \"-thumb-container\"),\n    style: currentPosition()\n  }, bind(), {\n    role: 'slider',\n    \"aria-label\": props['aria-label'] || locale.Slider.name,\n    \"aria-valuemax\": max,\n    \"aria-valuemin\": min,\n    \"aria-valuenow\": value,\n    \"aria-disabled\": disabled\n  }), renderPopoverContent ? React.createElement(Popover, {\n    content: renderPopoverContent(value),\n    placement: 'top',\n    visible: residentPopover || dragging,\n    getContainer: null,\n    mode: 'dark'\n  }, thumbElement) : thumbElement);\n};\n\nexport default Thumb;","map":{"version":3,"names":["React","useRef","useState","useDrag","ThumbIcon","Popover","useConfig","classPrefix","Thumb","props","value","min","max","disabled","icon","residentPopover","onDrag","prevValue","locale","currentPosition","left","right","dragging","setDragging","bind","state","_a","first","current","x","xy","initial","sliderOffsetWith","trackRef","offsetWidth","diff","Math","ceil","last","axis","pointer","touch","renderPopoverContent","popover","toString","thumbElement","createElement","className","Object","assign","style","role","Slider","name","content","placement","visible","getContainer","mode"],"sources":["/Users/stoneye/react_project/circle-app-react-hook/node_modules/antd-mobile/es/components/slider/thumb.js"],"sourcesContent":["import React, { useRef, useState } from 'react';\nimport { useDrag } from '@use-gesture/react';\nimport { ThumbIcon } from './thumb-icon';\nimport { Popover } from '../popover/popover';\nimport { useConfig } from '../config-provider';\nconst classPrefix = `adm-slider`;\n\nconst Thumb = props => {\n  const {\n    value,\n    min,\n    max,\n    disabled,\n    icon,\n    residentPopover,\n    onDrag\n  } = props;\n  const prevValue = useRef(value);\n  const {\n    locale\n  } = useConfig();\n\n  const currentPosition = () => {\n    return {\n      left: `${(value - min) / (max - min) * 100}%`,\n      right: 'auto'\n    };\n  };\n\n  const [dragging, setDragging] = useState(false);\n  const bind = useDrag(state => {\n    var _a;\n\n    if (disabled) return;\n\n    if (state.first) {\n      prevValue.current = value;\n    }\n\n    const x = state.xy[0] - state.initial[0];\n    const sliderOffsetWith = (_a = props.trackRef.current) === null || _a === void 0 ? void 0 : _a.offsetWidth;\n    if (!sliderOffsetWith) return;\n    const diff = x / Math.ceil(sliderOffsetWith) * (max - min);\n    onDrag(prevValue.current + diff, state.first, state.last);\n    setDragging(!state.last);\n  }, {\n    axis: 'x',\n    pointer: {\n      touch: true\n    }\n  });\n  const renderPopoverContent = typeof props.popover === 'function' ? props.popover : props.popover ? value => value.toString() : null;\n  const thumbElement = React.createElement(\"div\", {\n    className: `${classPrefix}-thumb`\n  }, icon ? icon : React.createElement(ThumbIcon, {\n    className: `${classPrefix}-thumb-icon`\n  }));\n  return React.createElement(\"div\", Object.assign({\n    className: `${classPrefix}-thumb-container`,\n    style: currentPosition()\n  }, bind(), {\n    role: 'slider',\n    \"aria-label\": props['aria-label'] || locale.Slider.name,\n    \"aria-valuemax\": max,\n    \"aria-valuemin\": min,\n    \"aria-valuenow\": value,\n    \"aria-disabled\": disabled\n  }), renderPopoverContent ? React.createElement(Popover, {\n    content: renderPopoverContent(value),\n    placement: 'top',\n    visible: residentPopover || dragging,\n    getContainer: null,\n    mode: 'dark'\n  }, thumbElement) : thumbElement);\n};\n\nexport default Thumb;"],"mappings":"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"},"metadata":{},"sourceType":"module"}