{"ast":null,"code":"import _defineProperty from \"/Users/stoneye/react_project/circle-app-react-hook/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _regeneratorRuntime from \"/Users/stoneye/react_project/circle-app-react-hook/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _slicedToArray from \"/Users/stoneye/react_project/circle-app-react-hook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { __awaiter } from \"tslib\";\nimport classNames from 'classnames';\nimport React, { useState } from 'react';\nimport { withNativeProps } from '../../utils/native-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { SpinIcon } from './spin-icon';\nimport { useConfig } from '../config-provider';\nimport { isPromise } from '../../utils/validate';\nvar classPrefix = \"adm-switch\";\nvar defaultProps = {\n  defaultChecked: false\n};\nexport var Switch = function Switch(p) {\n  var _classNames;\n\n  var props = mergeProps(defaultProps, p);\n  var disabled = props.disabled || props.loading || false;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      changing = _useState2[0],\n      setChanging = _useState2[1];\n\n  var _useConfig = useConfig(),\n      locale = _useConfig.locale;\n\n  var _usePropsValue = usePropsValue({\n    value: props.checked,\n    defaultValue: props.defaultChecked,\n    onChange: props.onChange\n  }),\n      _usePropsValue2 = _slicedToArray(_usePropsValue, 2),\n      checked = _usePropsValue2[0],\n      setChecked = _usePropsValue2[1];\n\n  function onClick() {\n    return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var nextChecked, result;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(disabled || props.loading || changing)) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 2:\n              nextChecked = !checked;\n\n              if (!props.beforeChange) {\n                _context.next = 15;\n                break;\n              }\n\n              setChanging(true);\n              _context.prev = 5;\n              _context.next = 8;\n              return props.beforeChange(nextChecked);\n\n            case 8:\n              setChanging(false);\n              _context.next = 15;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](5);\n              setChanging(false);\n              throw _context.t0;\n\n            case 15:\n              result = setChecked(nextChecked);\n\n              if (!isPromise(result)) {\n                _context.next = 28;\n                break;\n              }\n\n              setChanging(true);\n              _context.prev = 18;\n              _context.next = 21;\n              return result;\n\n            case 21:\n              setChanging(false);\n              _context.next = 28;\n              break;\n\n            case 24:\n              _context.prev = 24;\n              _context.t1 = _context[\"catch\"](18);\n              setChanging(false);\n              throw _context.t1;\n\n            case 28:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[5, 11], [18, 24]]);\n    }));\n  }\n\n  return withNativeProps(props, React.createElement(\"div\", {\n    onClick: onClick,\n    className: classNames(classPrefix, (_classNames = {}, _defineProperty(_classNames, \"\".concat(classPrefix, \"-checked\"), checked), _defineProperty(_classNames, \"\".concat(classPrefix, \"-disabled\"), disabled || changing), _classNames)),\n    role: 'switch',\n    \"aria-label\": locale.Switch.name,\n    \"aria-checked\": checked,\n    \"aria-disabled\": disabled\n  }, React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-checkbox\")\n  }, React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-handle\")\n  }, (props.loading || changing) && React.createElement(SpinIcon, {\n    className: \"\".concat(classPrefix, \"-spin-icon\")\n  })), React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-inner\")\n  }, checked ? props.checkedText : props.uncheckedText))));\n};","map":{"version":3,"names":["__awaiter","classNames","React","useState","withNativeProps","usePropsValue","mergeProps","SpinIcon","useConfig","isPromise","classPrefix","defaultProps","defaultChecked","Switch","p","props","disabled","loading","changing","setChanging","locale","value","checked","defaultValue","onChange","setChecked","onClick","nextChecked","beforeChange","result","createElement","className","role","name","checkedText","uncheckedText"],"sources":["/Users/stoneye/react_project/circle-app-react-hook/node_modules/antd-mobile/es/components/switch/switch.js"],"sourcesContent":["import { __awaiter } from \"tslib\";\nimport classNames from 'classnames';\nimport React, { useState } from 'react';\nimport { withNativeProps } from '../../utils/native-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { SpinIcon } from './spin-icon';\nimport { useConfig } from '../config-provider';\nimport { isPromise } from '../../utils/validate';\nconst classPrefix = `adm-switch`;\nconst defaultProps = {\n  defaultChecked: false\n};\nexport const Switch = p => {\n  const props = mergeProps(defaultProps, p);\n  const disabled = props.disabled || props.loading || false;\n  const [changing, setChanging] = useState(false);\n  const {\n    locale\n  } = useConfig();\n  const [checked, setChecked] = usePropsValue({\n    value: props.checked,\n    defaultValue: props.defaultChecked,\n    onChange: props.onChange\n  });\n\n  function onClick() {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (disabled || props.loading || changing) {\n        return;\n      }\n\n      const nextChecked = !checked;\n\n      if (props.beforeChange) {\n        setChanging(true);\n\n        try {\n          yield props.beforeChange(nextChecked);\n          setChanging(false);\n        } catch (e) {\n          setChanging(false);\n          throw e;\n        }\n      }\n\n      const result = setChecked(nextChecked);\n\n      if (isPromise(result)) {\n        setChanging(true);\n\n        try {\n          yield result;\n          setChanging(false);\n        } catch (e) {\n          setChanging(false);\n          throw e;\n        }\n      }\n    });\n  }\n\n  return withNativeProps(props, React.createElement(\"div\", {\n    onClick: onClick,\n    className: classNames(classPrefix, {\n      [`${classPrefix}-checked`]: checked,\n      [`${classPrefix}-disabled`]: disabled || changing\n    }),\n    role: 'switch',\n    \"aria-label\": locale.Switch.name,\n    \"aria-checked\": checked,\n    \"aria-disabled\": disabled\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-checkbox`\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-handle`\n  }, (props.loading || changing) && React.createElement(SpinIcon, {\n    className: `${classPrefix}-spin-icon`\n  })), React.createElement(\"div\", {\n    className: `${classPrefix}-inner`\n  }, checked ? props.checkedText : props.uncheckedText))));\n};"],"mappings":";;;AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,eAAT,QAAgC,0BAAhC;AACA,SAASC,aAAT,QAA8B,6BAA9B;AACA,SAASC,UAAT,QAA2B,gCAA3B;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,SAASC,SAAT,QAA0B,sBAA1B;AACA,IAAMC,WAAW,eAAjB;AACA,IAAMC,YAAY,GAAG;EACnBC,cAAc,EAAE;AADG,CAArB;AAGA,OAAO,IAAMC,MAAM,GAAG,SAATA,MAAS,CAAAC,CAAC,EAAI;EAAA;;EACzB,IAAMC,KAAK,GAAGT,UAAU,CAACK,YAAD,EAAeG,CAAf,CAAxB;EACA,IAAME,QAAQ,GAAGD,KAAK,CAACC,QAAN,IAAkBD,KAAK,CAACE,OAAxB,IAAmC,KAApD;;EACA,gBAAgCd,QAAQ,CAAC,KAAD,CAAxC;EAAA;EAAA,IAAOe,QAAP;EAAA,IAAiBC,WAAjB;;EACA,iBAEIX,SAAS,EAFb;EAAA,IACEY,MADF,cACEA,MADF;;EAGA,qBAA8Bf,aAAa,CAAC;IAC1CgB,KAAK,EAAEN,KAAK,CAACO,OAD6B;IAE1CC,YAAY,EAAER,KAAK,CAACH,cAFsB;IAG1CY,QAAQ,EAAET,KAAK,CAACS;EAH0B,CAAD,CAA3C;EAAA;EAAA,IAAOF,OAAP;EAAA,IAAgBG,UAAhB;;EAMA,SAASC,OAAT,GAAmB;IACjB,OAAO1B,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,0CAAuB;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA,MACjCgB,QAAQ,IAAID,KAAK,CAACE,OAAlB,IAA6BC,QADI;gBAAA;gBAAA;cAAA;;cAAA;;YAAA;cAK/BS,WAL+B,GAKjB,CAACL,OALgB;;cAAA,KAOjCP,KAAK,CAACa,YAP2B;gBAAA;gBAAA;cAAA;;cAQnCT,WAAW,CAAC,IAAD,CAAX;cARmC;cAAA;cAWjC,OAAMJ,KAAK,CAACa,YAAN,CAAmBD,WAAnB,CAAN;;YAXiC;cAYjCR,WAAW,CAAC,KAAD,CAAX;cAZiC;cAAA;;YAAA;cAAA;cAAA;cAcjCA,WAAW,CAAC,KAAD,CAAX;cAdiC;;YAAA;cAmB/BU,MAnB+B,GAmBtBJ,UAAU,CAACE,WAAD,CAnBY;;cAAA,KAqBjClB,SAAS,CAACoB,MAAD,CArBwB;gBAAA;gBAAA;cAAA;;cAsBnCV,WAAW,CAAC,IAAD,CAAX;cAtBmC;cAAA;cAyBjC,OAAMU,MAAN;;YAzBiC;cA0BjCV,WAAW,CAAC,KAAD,CAAX;cA1BiC;cAAA;;YAAA;cAAA;cAAA;cA4BjCA,WAAW,CAAC,KAAD,CAAX;cA5BiC;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAvB,EAAhB;EAiCD;;EAED,OAAOf,eAAe,CAACW,KAAD,EAAQb,KAAK,CAAC4B,aAAN,CAAoB,KAApB,EAA2B;IACvDJ,OAAO,EAAEA,OAD8C;IAEvDK,SAAS,EAAE9B,UAAU,CAACS,WAAD,4DACfA,WADe,eACSY,OADT,0CAEfZ,WAFe,gBAEUM,QAAQ,IAAIE,QAFtB,gBAFkC;IAMvDc,IAAI,EAAE,QANiD;IAOvD,cAAcZ,MAAM,CAACP,MAAP,CAAcoB,IAP2B;IAQvD,gBAAgBX,OARuC;IASvD,iBAAiBN;EATsC,CAA3B,EAU3Bd,KAAK,CAAC4B,aAAN,CAAoB,KAApB,EAA2B;IAC5BC,SAAS,YAAKrB,WAAL;EADmB,CAA3B,EAEAR,KAAK,CAAC4B,aAAN,CAAoB,KAApB,EAA2B;IAC5BC,SAAS,YAAKrB,WAAL;EADmB,CAA3B,EAEA,CAACK,KAAK,CAACE,OAAN,IAAiBC,QAAlB,KAA+BhB,KAAK,CAAC4B,aAAN,CAAoBvB,QAApB,EAA8B;IAC9DwB,SAAS,YAAKrB,WAAL;EADqD,CAA9B,CAF/B,CAFA,EAMER,KAAK,CAAC4B,aAAN,CAAoB,KAApB,EAA2B;IAC9BC,SAAS,YAAKrB,WAAL;EADqB,CAA3B,EAEFY,OAAO,GAAGP,KAAK,CAACmB,WAAT,GAAuBnB,KAAK,CAACoB,aAFlC,CANF,CAV2B,CAAR,CAAtB;AAmBD,CApEM"},"metadata":{},"sourceType":"module"}