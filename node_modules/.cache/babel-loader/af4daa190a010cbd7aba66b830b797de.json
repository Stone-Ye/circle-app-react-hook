{"ast":null,"code":"import _defineProperty from \"/Users/stoneye/react_project/circle-app-react-hook/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _slicedToArray from \"/Users/stoneye/react_project/circle-app-react-hook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React from 'react';\nimport classNames from 'classnames';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport Badge from '../badge';\nimport SafeArea from '../safe-area';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { traverseReactNode } from '../../utils/traverse-react-node';\n/* istanbul ignore next */\n\nexport var TabBarItem = function TabBarItem() {\n  return null;\n};\nvar classPrefix = \"adm-tab-bar\";\nvar defaultProps = {\n  safeArea: false\n};\nexport var TabBar = function TabBar(p) {\n  var _a;\n\n  var props = mergeProps(defaultProps, p);\n  var firstActiveKey = null;\n  var items = [];\n  traverseReactNode(props.children, function (child, index) {\n    if (!React.isValidElement(child)) return;\n    var key = child.key;\n    if (typeof key !== 'string') return;\n\n    if (index === 0) {\n      firstActiveKey = key;\n    }\n\n    items.push(child);\n  });\n\n  var _usePropsValue = usePropsValue({\n    value: props.activeKey,\n    defaultValue: (_a = props.defaultActiveKey) !== null && _a !== void 0 ? _a : firstActiveKey,\n    onChange: function onChange(v) {\n      var _a;\n\n      if (v === null) return;\n      (_a = props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, v);\n    }\n  }),\n      _usePropsValue2 = _slicedToArray(_usePropsValue, 2),\n      activeKey = _usePropsValue2[0],\n      setActiveKey = _usePropsValue2[1];\n\n  return withNativeProps(props, React.createElement(\"div\", {\n    className: classPrefix\n  }, React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-wrap\")\n  }, items.map(function (item) {\n    var active = item.key === activeKey;\n\n    function renderContent() {\n      var iconElement = item.props.icon && React.createElement(\"div\", {\n        className: \"\".concat(classPrefix, \"-item-icon\")\n      }, typeof item.props.icon === 'function' ? item.props.icon(active) : item.props.icon);\n      var titleElement = item.props.title && React.createElement(\"div\", {\n        className: classNames(\"\".concat(classPrefix, \"-item-title\"), Boolean(iconElement) && \"\".concat(classPrefix, \"-item-title-with-icon\"))\n      }, typeof item.props.title === 'function' ? item.props.title(active) : item.props.title);\n\n      if (iconElement) {\n        return React.createElement(React.Fragment, null, React.createElement(Badge, {\n          content: item.props.badge,\n          className: \"\".concat(classPrefix, \"-icon-badge\")\n        }, iconElement), titleElement);\n      } else if (titleElement) {\n        return React.createElement(Badge, {\n          content: item.props.badge,\n          className: \"\".concat(classPrefix, \"-title-badge\")\n        }, titleElement);\n      }\n\n      return null;\n    }\n\n    return withNativeProps(item.props, React.createElement(\"div\", {\n      key: item.key,\n      onClick: function onClick() {\n        var key = item.key;\n        if (key === undefined || key === null) return;\n        setActiveKey(key.toString());\n      },\n      className: classNames(\"\".concat(classPrefix, \"-item\"), _defineProperty({}, \"\".concat(classPrefix, \"-item-active\"), active))\n    }, renderContent()));\n  })), props.safeArea && React.createElement(SafeArea, {\n    position: 'bottom'\n  })));\n};","map":{"version":3,"names":["React","classNames","withNativeProps","mergeProps","Badge","SafeArea","usePropsValue","traverseReactNode","TabBarItem","classPrefix","defaultProps","safeArea","TabBar","p","_a","props","firstActiveKey","items","children","child","index","isValidElement","key","push","value","activeKey","defaultValue","defaultActiveKey","onChange","v","call","setActiveKey","createElement","className","map","item","active","renderContent","iconElement","icon","titleElement","title","Boolean","Fragment","content","badge","onClick","undefined","toString","position"],"sources":["/Users/stoneye/react_project/circle-app-react-hook/node_modules/antd-mobile/es/components/tab-bar/tab-bar.js"],"sourcesContent":["import React from 'react';\nimport classNames from 'classnames';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport Badge from '../badge';\nimport SafeArea from '../safe-area';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { traverseReactNode } from '../../utils/traverse-react-node';\n/* istanbul ignore next */\n\nexport const TabBarItem = () => {\n  return null;\n};\nconst classPrefix = `adm-tab-bar`;\nconst defaultProps = {\n  safeArea: false\n};\nexport const TabBar = p => {\n  var _a;\n\n  const props = mergeProps(defaultProps, p);\n  let firstActiveKey = null;\n  const items = [];\n  traverseReactNode(props.children, (child, index) => {\n    if (!React.isValidElement(child)) return;\n    const key = child.key;\n    if (typeof key !== 'string') return;\n\n    if (index === 0) {\n      firstActiveKey = key;\n    }\n\n    items.push(child);\n  });\n  const [activeKey, setActiveKey] = usePropsValue({\n    value: props.activeKey,\n    defaultValue: (_a = props.defaultActiveKey) !== null && _a !== void 0 ? _a : firstActiveKey,\n    onChange: v => {\n      var _a;\n\n      if (v === null) return;\n      (_a = props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, v);\n    }\n  });\n  return withNativeProps(props, React.createElement(\"div\", {\n    className: classPrefix\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-wrap`\n  }, items.map(item => {\n    const active = item.key === activeKey;\n\n    function renderContent() {\n      const iconElement = item.props.icon && React.createElement(\"div\", {\n        className: `${classPrefix}-item-icon`\n      }, typeof item.props.icon === 'function' ? item.props.icon(active) : item.props.icon);\n      const titleElement = item.props.title && React.createElement(\"div\", {\n        className: classNames(`${classPrefix}-item-title`, Boolean(iconElement) && `${classPrefix}-item-title-with-icon`)\n      }, typeof item.props.title === 'function' ? item.props.title(active) : item.props.title);\n\n      if (iconElement) {\n        return React.createElement(React.Fragment, null, React.createElement(Badge, {\n          content: item.props.badge,\n          className: `${classPrefix}-icon-badge`\n        }, iconElement), titleElement);\n      } else if (titleElement) {\n        return React.createElement(Badge, {\n          content: item.props.badge,\n          className: `${classPrefix}-title-badge`\n        }, titleElement);\n      }\n\n      return null;\n    }\n\n    return withNativeProps(item.props, React.createElement(\"div\", {\n      key: item.key,\n      onClick: () => {\n        const {\n          key\n        } = item;\n        if (key === undefined || key === null) return;\n        setActiveKey(key.toString());\n      },\n      className: classNames(`${classPrefix}-item`, {\n        [`${classPrefix}-item-active`]: active\n      })\n    }, renderContent()));\n  })), props.safeArea && React.createElement(SafeArea, {\n    position: 'bottom'\n  })));\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}