{"ast":null,"code":"import _slicedToArray from \"/Users/stoneye/react_project/circle-app-react-hook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useCallback, useMemo } from 'react';\nimport PickerView from '../picker-view';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { generateDatePickerColumns, convertDateToStringArray, convertStringArrayToDate, defaultRenderLabel } from '../date-picker/date-picker-utils';\nvar thisYear = new Date().getFullYear();\nvar defaultProps = {\n  min: new Date(new Date().setFullYear(thisYear - 10)),\n  max: new Date(new Date().setFullYear(thisYear + 10)),\n  precision: 'day',\n  renderLabel: defaultRenderLabel\n};\nexport var DatePickerView = function DatePickerView(p) {\n  var _a;\n\n  var props = mergeProps(defaultProps, p);\n\n  var _usePropsValue = usePropsValue({\n    value: props.value,\n    defaultValue: (_a = props.defaultValue) !== null && _a !== void 0 ? _a : null\n  }),\n      _usePropsValue2 = _slicedToArray(_usePropsValue, 2),\n      value = _usePropsValue2[0],\n      setValue = _usePropsValue2[1];\n\n  var pickerValue = useMemo(function () {\n    return convertDateToStringArray(value, props.precision);\n  }, [value, props.precision]);\n  var onChange = useCallback(function (val) {\n    var _a;\n\n    var date = convertStringArrayToDate(val, props.precision);\n\n    if (date) {\n      setValue(date);\n      (_a = props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, date);\n    }\n  }, [props.onChange, props.precision]);\n  return withNativeProps(props, React.createElement(PickerView, {\n    columns: function columns(selected) {\n      return generateDatePickerColumns(selected, props.min, props.max, props.precision, props.renderLabel, props.filter);\n    },\n    loading: props.loading,\n    loadingContent: props.loadingContent,\n    value: pickerValue,\n    mouseWheel: props.mouseWheel,\n    onChange: onChange\n  }));\n};","map":{"version":3,"names":["React","useCallback","useMemo","PickerView","withNativeProps","mergeProps","usePropsValue","generateDatePickerColumns","convertDateToStringArray","convertStringArrayToDate","defaultRenderLabel","thisYear","Date","getFullYear","defaultProps","min","setFullYear","max","precision","renderLabel","DatePickerView","p","_a","props","value","defaultValue","setValue","pickerValue","onChange","val","date","call","createElement","columns","selected","filter","loading","loadingContent","mouseWheel"],"sources":["/Users/stoneye/react_project/circle-app-react-hook/node_modules/antd-mobile/es/components/date-picker-view/date-picker-view.js"],"sourcesContent":["import React, { useCallback, useMemo } from 'react';\nimport PickerView from '../picker-view';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { generateDatePickerColumns, convertDateToStringArray, convertStringArrayToDate, defaultRenderLabel } from '../date-picker/date-picker-utils';\nconst thisYear = new Date().getFullYear();\nconst defaultProps = {\n  min: new Date(new Date().setFullYear(thisYear - 10)),\n  max: new Date(new Date().setFullYear(thisYear + 10)),\n  precision: 'day',\n  renderLabel: defaultRenderLabel\n};\nexport const DatePickerView = p => {\n  var _a;\n\n  const props = mergeProps(defaultProps, p);\n  const [value, setValue] = usePropsValue({\n    value: props.value,\n    defaultValue: (_a = props.defaultValue) !== null && _a !== void 0 ? _a : null\n  });\n  const pickerValue = useMemo(() => convertDateToStringArray(value, props.precision), [value, props.precision]);\n  const onChange = useCallback(val => {\n    var _a;\n\n    const date = convertStringArrayToDate(val, props.precision);\n\n    if (date) {\n      setValue(date);\n      (_a = props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, date);\n    }\n  }, [props.onChange, props.precision]);\n  return withNativeProps(props, React.createElement(PickerView, {\n    columns: selected => generateDatePickerColumns(selected, props.min, props.max, props.precision, props.renderLabel, props.filter),\n    loading: props.loading,\n    loadingContent: props.loadingContent,\n    value: pickerValue,\n    mouseWheel: props.mouseWheel,\n    onChange: onChange\n  }));\n};"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,WAAhB,EAA6BC,OAA7B,QAA4C,OAA5C;AACA,OAAOC,UAAP,MAAuB,gBAAvB;AACA,SAASC,eAAT,QAAgC,0BAAhC;AACA,SAASC,UAAT,QAA2B,gCAA3B;AACA,SAASC,aAAT,QAA8B,6BAA9B;AACA,SAASC,yBAAT,EAAoCC,wBAApC,EAA8DC,wBAA9D,EAAwFC,kBAAxF,QAAkH,kCAAlH;AACA,IAAMC,QAAQ,GAAG,IAAIC,IAAJ,GAAWC,WAAX,EAAjB;AACA,IAAMC,YAAY,GAAG;EACnBC,GAAG,EAAE,IAAIH,IAAJ,CAAS,IAAIA,IAAJ,GAAWI,WAAX,CAAuBL,QAAQ,GAAG,EAAlC,CAAT,CADc;EAEnBM,GAAG,EAAE,IAAIL,IAAJ,CAAS,IAAIA,IAAJ,GAAWI,WAAX,CAAuBL,QAAQ,GAAG,EAAlC,CAAT,CAFc;EAGnBO,SAAS,EAAE,KAHQ;EAInBC,WAAW,EAAET;AAJM,CAArB;AAMA,OAAO,IAAMU,cAAc,GAAG,SAAjBA,cAAiB,CAAAC,CAAC,EAAI;EACjC,IAAIC,EAAJ;;EAEA,IAAMC,KAAK,GAAGlB,UAAU,CAACS,YAAD,EAAeO,CAAf,CAAxB;;EACA,qBAA0Bf,aAAa,CAAC;IACtCkB,KAAK,EAAED,KAAK,CAACC,KADyB;IAEtCC,YAAY,EAAE,CAACH,EAAE,GAAGC,KAAK,CAACE,YAAZ,MAA8B,IAA9B,IAAsCH,EAAE,KAAK,KAAK,CAAlD,GAAsDA,EAAtD,GAA2D;EAFnC,CAAD,CAAvC;EAAA;EAAA,IAAOE,KAAP;EAAA,IAAcE,QAAd;;EAIA,IAAMC,WAAW,GAAGzB,OAAO,CAAC;IAAA,OAAMM,wBAAwB,CAACgB,KAAD,EAAQD,KAAK,CAACL,SAAd,CAA9B;EAAA,CAAD,EAAyD,CAACM,KAAD,EAAQD,KAAK,CAACL,SAAd,CAAzD,CAA3B;EACA,IAAMU,QAAQ,GAAG3B,WAAW,CAAC,UAAA4B,GAAG,EAAI;IAClC,IAAIP,EAAJ;;IAEA,IAAMQ,IAAI,GAAGrB,wBAAwB,CAACoB,GAAD,EAAMN,KAAK,CAACL,SAAZ,CAArC;;IAEA,IAAIY,IAAJ,EAAU;MACRJ,QAAQ,CAACI,IAAD,CAAR;MACA,CAACR,EAAE,GAAGC,KAAK,CAACK,QAAZ,MAA0B,IAA1B,IAAkCN,EAAE,KAAK,KAAK,CAA9C,GAAkD,KAAK,CAAvD,GAA2DA,EAAE,CAACS,IAAH,CAAQR,KAAR,EAAeO,IAAf,CAA3D;IACD;EACF,CAT2B,EASzB,CAACP,KAAK,CAACK,QAAP,EAAiBL,KAAK,CAACL,SAAvB,CATyB,CAA5B;EAUA,OAAOd,eAAe,CAACmB,KAAD,EAAQvB,KAAK,CAACgC,aAAN,CAAoB7B,UAApB,EAAgC;IAC5D8B,OAAO,EAAE,iBAAAC,QAAQ;MAAA,OAAI3B,yBAAyB,CAAC2B,QAAD,EAAWX,KAAK,CAACR,GAAjB,EAAsBQ,KAAK,CAACN,GAA5B,EAAiCM,KAAK,CAACL,SAAvC,EAAkDK,KAAK,CAACJ,WAAxD,EAAqEI,KAAK,CAACY,MAA3E,CAA7B;IAAA,CAD2C;IAE5DC,OAAO,EAAEb,KAAK,CAACa,OAF6C;IAG5DC,cAAc,EAAEd,KAAK,CAACc,cAHsC;IAI5Db,KAAK,EAAEG,WAJqD;IAK5DW,UAAU,EAAEf,KAAK,CAACe,UAL0C;IAM5DV,QAAQ,EAAEA;EANkD,CAAhC,CAAR,CAAtB;AAQD,CA3BM"},"metadata":{},"sourceType":"module"}