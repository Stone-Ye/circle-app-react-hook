{"ast":null,"code":"import _slicedToArray from \"/Users/stoneye/react_project/circle-app-react-hook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useState, useEffect, forwardRef, useImperativeHandle } from 'react';\nimport Popup from '../popup';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { withNativeProps } from '../../utils/native-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport CascaderView from '../cascader-view';\nimport { useConfig } from '../config-provider';\nimport { useCascaderValueExtend } from '../cascader-view/use-cascader-value-extend';\nvar classPrefix = \"adm-cascader\";\nvar defaultProps = {\n  defaultValue: [],\n  destroyOnClose: true,\n  forceRender: false\n};\nexport var Cascader = forwardRef(function (p, ref) {\n  var _a;\n\n  var _useConfig = useConfig(),\n      locale = _useConfig.locale;\n\n  var props = mergeProps(defaultProps, {\n    confirmText: locale.common.confirm,\n    cancelText: locale.common.cancel,\n    placeholder: locale.Cascader.placeholder\n  }, p);\n\n  var _usePropsValue = usePropsValue({\n    value: props.visible,\n    defaultValue: false,\n    onChange: function onChange(v) {\n      var _a;\n\n      if (v === false) {\n        (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n      }\n    }\n  }),\n      _usePropsValue2 = _slicedToArray(_usePropsValue, 2),\n      visible = _usePropsValue2[0],\n      setVisible = _usePropsValue2[1];\n\n  var actions = {\n    toggle: function toggle() {\n      setVisible(function (v) {\n        return !v;\n      });\n    },\n    open: function open() {\n      setVisible(true);\n    },\n    close: function close() {\n      setVisible(false);\n    }\n  };\n  useImperativeHandle(ref, function () {\n    return actions;\n  });\n\n  var _usePropsValue3 = usePropsValue(Object.assign(Object.assign({}, props), {\n    onChange: function onChange(val) {\n      var _a;\n\n      (_a = props.onConfirm) === null || _a === void 0 ? void 0 : _a.call(props, val, generateValueExtend(val));\n    }\n  })),\n      _usePropsValue4 = _slicedToArray(_usePropsValue3, 2),\n      value = _usePropsValue4[0],\n      setValue = _usePropsValue4[1];\n\n  var generateValueExtend = useCascaderValueExtend(props.options);\n\n  var _useState = useState(value),\n      _useState2 = _slicedToArray(_useState, 2),\n      innerValue = _useState2[0],\n      setInnerValue = _useState2[1];\n\n  useEffect(function () {\n    if (!visible) {\n      setInnerValue(value);\n    }\n  }, [visible]);\n  useEffect(function () {\n    if (!visible) {\n      setInnerValue(value);\n    }\n  }, [value]);\n  var cascaderElement = withNativeProps(props, React.createElement(\"div\", {\n    className: classPrefix\n  }, React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-header\")\n  }, React.createElement(\"a\", {\n    className: \"\".concat(classPrefix, \"-header-button\"),\n    onClick: function onClick() {\n      var _a;\n\n      (_a = props.onCancel) === null || _a === void 0 ? void 0 : _a.call(props);\n      setVisible(false);\n    }\n  }, props.cancelText), React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-header-title\")\n  }, props.title), React.createElement(\"a\", {\n    className: \"\".concat(classPrefix, \"-header-button\"),\n    onClick: function onClick() {\n      setValue(innerValue, true);\n      setVisible(false);\n    }\n  }, props.confirmText)), React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-body\")\n  }, React.createElement(CascaderView, Object.assign({}, props, {\n    value: innerValue,\n    onChange: function onChange(val, ext) {\n      var _a;\n\n      setInnerValue(val);\n\n      if (visible) {\n        (_a = props.onSelect) === null || _a === void 0 ? void 0 : _a.call(props, val, ext);\n      }\n    }\n  })))));\n  var popupElement = React.createElement(Popup, {\n    visible: visible,\n    position: 'bottom',\n    onMaskClick: function onMaskClick() {\n      var _a;\n\n      (_a = props.onCancel) === null || _a === void 0 ? void 0 : _a.call(props);\n      setVisible(false);\n    },\n    getContainer: props.getContainer,\n    destroyOnClose: props.destroyOnClose,\n    forceRender: props.forceRender,\n    afterShow: props.afterShow,\n    afterClose: props.afterClose,\n    onClick: props.onClick,\n    stopPropagation: props.stopPropagation\n  }, cascaderElement);\n  return React.createElement(React.Fragment, null, popupElement, (_a = props.children) === null || _a === void 0 ? void 0 : _a.call(props, generateValueExtend(value).items, actions));\n});","map":{"version":3,"names":["React","useState","useEffect","forwardRef","useImperativeHandle","Popup","mergeProps","withNativeProps","usePropsValue","CascaderView","useConfig","useCascaderValueExtend","classPrefix","defaultProps","defaultValue","destroyOnClose","forceRender","Cascader","p","ref","_a","locale","props","confirmText","common","confirm","cancelText","cancel","placeholder","value","visible","onChange","v","onClose","call","setVisible","actions","toggle","open","close","Object","assign","val","onConfirm","generateValueExtend","setValue","options","innerValue","setInnerValue","cascaderElement","createElement","className","onClick","onCancel","title","ext","onSelect","popupElement","position","onMaskClick","getContainer","afterShow","afterClose","stopPropagation","Fragment","children","items"],"sources":["/Users/stoneye/react_project/circle-app-react-hook/node_modules/antd-mobile/es/components/cascader/cascader.js"],"sourcesContent":["import React, { useState, useEffect, forwardRef, useImperativeHandle } from 'react';\nimport Popup from '../popup';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { withNativeProps } from '../../utils/native-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport CascaderView from '../cascader-view';\nimport { useConfig } from '../config-provider';\nimport { useCascaderValueExtend } from '../cascader-view/use-cascader-value-extend';\nconst classPrefix = `adm-cascader`;\nconst defaultProps = {\n  defaultValue: [],\n  destroyOnClose: true,\n  forceRender: false\n};\nexport const Cascader = forwardRef((p, ref) => {\n  var _a;\n\n  const {\n    locale\n  } = useConfig();\n  const props = mergeProps(defaultProps, {\n    confirmText: locale.common.confirm,\n    cancelText: locale.common.cancel,\n    placeholder: locale.Cascader.placeholder\n  }, p);\n  const [visible, setVisible] = usePropsValue({\n    value: props.visible,\n    defaultValue: false,\n    onChange: v => {\n      var _a;\n\n      if (v === false) {\n        (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n      }\n    }\n  });\n  const actions = {\n    toggle: () => {\n      setVisible(v => !v);\n    },\n    open: () => {\n      setVisible(true);\n    },\n    close: () => {\n      setVisible(false);\n    }\n  };\n  useImperativeHandle(ref, () => actions);\n  const [value, setValue] = usePropsValue(Object.assign(Object.assign({}, props), {\n    onChange: val => {\n      var _a;\n\n      (_a = props.onConfirm) === null || _a === void 0 ? void 0 : _a.call(props, val, generateValueExtend(val));\n    }\n  }));\n  const generateValueExtend = useCascaderValueExtend(props.options);\n  const [innerValue, setInnerValue] = useState(value);\n  useEffect(() => {\n    if (!visible) {\n      setInnerValue(value);\n    }\n  }, [visible]);\n  useEffect(() => {\n    if (!visible) {\n      setInnerValue(value);\n    }\n  }, [value]);\n  const cascaderElement = withNativeProps(props, React.createElement(\"div\", {\n    className: classPrefix\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-header`\n  }, React.createElement(\"a\", {\n    className: `${classPrefix}-header-button`,\n    onClick: () => {\n      var _a;\n\n      (_a = props.onCancel) === null || _a === void 0 ? void 0 : _a.call(props);\n      setVisible(false);\n    }\n  }, props.cancelText), React.createElement(\"div\", {\n    className: `${classPrefix}-header-title`\n  }, props.title), React.createElement(\"a\", {\n    className: `${classPrefix}-header-button`,\n    onClick: () => {\n      setValue(innerValue, true);\n      setVisible(false);\n    }\n  }, props.confirmText)), React.createElement(\"div\", {\n    className: `${classPrefix}-body`\n  }, React.createElement(CascaderView, Object.assign({}, props, {\n    value: innerValue,\n    onChange: (val, ext) => {\n      var _a;\n\n      setInnerValue(val);\n\n      if (visible) {\n        (_a = props.onSelect) === null || _a === void 0 ? void 0 : _a.call(props, val, ext);\n      }\n    }\n  })))));\n  const popupElement = React.createElement(Popup, {\n    visible: visible,\n    position: 'bottom',\n    onMaskClick: () => {\n      var _a;\n\n      (_a = props.onCancel) === null || _a === void 0 ? void 0 : _a.call(props);\n      setVisible(false);\n    },\n    getContainer: props.getContainer,\n    destroyOnClose: props.destroyOnClose,\n    forceRender: props.forceRender,\n    afterShow: props.afterShow,\n    afterClose: props.afterClose,\n    onClick: props.onClick,\n    stopPropagation: props.stopPropagation\n  }, cascaderElement);\n  return React.createElement(React.Fragment, null, popupElement, (_a = props.children) === null || _a === void 0 ? void 0 : _a.call(props, generateValueExtend(value).items, actions));\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}