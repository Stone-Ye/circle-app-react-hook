{"ast":null,"code":"import _slicedToArray from\"/Users/stoneye/react_project/circle-app-react-hook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useNavigate,useLocation}from'react-router-dom';import styles from'./index.module.css';import{getUserName,getAllUserInfos,getProductsData}from'../Utils/global';import HeadNav from'../Component/HeadNav';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function PostList(){var navigate=useNavigate();var _useLocation=useLocation(),state=_useLocation.state;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),postlist=_useState2[0],setPostList=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),productsData=_useState4[0],setProductsData=_useState4[1];useEffect(function(){var username=getUserName();var allUserInfos=getAllUserInfos();setPostList(allUserInfos[username]['postList']);setProductsData(getProductsData());},[state]);var PostListContent=function PostListContent(){return/*#__PURE__*/_jsxs(\"div\",{className:styles.postlistContent,children:[postlist.map(function(productID){var _productsData$product=productsData[productID],category=_productsData$product.category,imgs=_productsData$product.imgs,title=_productsData$product.title,price=_productsData$product.price,seller=_productsData$product.seller;return/*#__PURE__*/_jsxs(\"div\",{className:styles.postlistItem,children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Seller: \",seller]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.postlistItemInfos,onClick:function onClick(){navigate('/productDetails',{replace:true,state:{'productInfos':productsData[productID]}});},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:imgs[0]})}),/*#__PURE__*/_jsx(\"div\",{children:title})]}),/*#__PURE__*/_jsx(\"div\",{children:price})]})]},category+productID);}),/*#__PURE__*/_jsxs(\"div\",{className:styles.totalItems,children:[\"Total Items: \",postlist.length]})]});};return/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[/*#__PURE__*/_jsx(HeadNav,{title:\"PostListDetails\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.body,children:postlist.length>0?/*#__PURE__*/_jsx(PostListContent,{}):''})]});}","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useLocation","styles","getUserName","getAllUserInfos","getProductsData","HeadNav","PostList","navigate","state","postlist","setPostList","productsData","setProductsData","username","allUserInfos","PostListContent","postlistContent","map","productID","category","imgs","title","price","seller","postlistItem","postlistItemInfos","replace","totalItems","length","container","body"],"sources":["/Users/stoneye/react_project/circle-app-react-hook/src/views/PostList/index.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { useNavigate, useLocation } from 'react-router-dom'\nimport styles from './index.module.css'\nimport { getUserName, getAllUserInfos, getProductsData } from '../Utils/global'\nimport HeadNav from '../Component/HeadNav'\n\nexport default function PostList () {\n  const navigate = useNavigate()\n  const { state } = useLocation()\n  const [postlist, setPostList] = useState([])\n  const [productsData, setProductsData] = useState([])\n  useEffect(() => {\n    let username = getUserName()\n    let allUserInfos = getAllUserInfos()\n    setPostList(allUserInfos[username]['postList'])\n    setProductsData(getProductsData())\n  }, [state])\n\n\n  const PostListContent = () => {\n    return <div className={styles.postlistContent}>\n\n      {postlist.map((productID) => {\n        let { category, imgs, title, price, seller } = productsData[productID]\n\n        return <div className={styles.postlistItem} key={category + productID}>\n          <div>Seller: {seller}</div>\n          <div className={styles.postlistItemInfos} onClick={() => { navigate('/productDetails', { replace: true, state: { 'productInfos': productsData[productID] } }) }}>\n            <div>\n              <div><img src={imgs[0]} /></div>\n              <div>{title}</div>\n            </div>\n            <div>{price}</div>\n          </div>\n        </div>\n      })}\n      <div className={styles.totalItems}>Total Items: {postlist.length}</div>\n    </div>\n\n\n  }\n\n\n  return <div className={styles.container}>\n\n    <HeadNav title='PostListDetails' />\n    <div className={styles.body}>\n      {postlist.length > 0 ? <PostListContent /> : ''}\n    </div>\n  </div>\n\n}"],"mappings":"wIAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,kBAAzC,CACA,MAAOC,OAAP,KAAmB,oBAAnB,CACA,OAASC,WAAT,CAAsBC,eAAtB,CAAuCC,eAAvC,KAA8D,iBAA9D,CACA,MAAOC,QAAP,KAAoB,sBAApB,C,wFAEA,cAAe,SAASC,SAAT,EAAqB,CAClC,GAAMC,SAAQ,CAAGR,WAAW,EAA5B,CACA,iBAAkBC,WAAW,EAA7B,CAAQQ,KAAR,cAAQA,KAAR,CACA,cAAgCV,QAAQ,CAAC,EAAD,CAAxC,wCAAOW,QAAP,eAAiBC,WAAjB,eACA,eAAwCZ,QAAQ,CAAC,EAAD,CAAhD,yCAAOa,YAAP,eAAqBC,eAArB,eACAf,SAAS,CAAC,UAAM,CACd,GAAIgB,SAAQ,CAAGX,WAAW,EAA1B,CACA,GAAIY,aAAY,CAAGX,eAAe,EAAlC,CACAO,WAAW,CAACI,YAAY,CAACD,QAAD,CAAZ,CAAuB,UAAvB,CAAD,CAAX,CACAD,eAAe,CAACR,eAAe,EAAhB,CAAf,CACD,CALQ,CAKN,CAACI,KAAD,CALM,CAAT,CAQA,GAAMO,gBAAe,CAAG,QAAlBA,gBAAkB,EAAM,CAC5B,mBAAO,aAAK,SAAS,CAAEd,MAAM,CAACe,eAAvB,WAEJP,QAAQ,CAACQ,GAAT,CAAa,SAACC,SAAD,CAAe,CAC3B,0BAA+CP,YAAY,CAACO,SAAD,CAA3D,CAAMC,QAAN,uBAAMA,QAAN,CAAgBC,IAAhB,uBAAgBA,IAAhB,CAAsBC,KAAtB,uBAAsBA,KAAtB,CAA6BC,KAA7B,uBAA6BA,KAA7B,CAAoCC,MAApC,uBAAoCA,MAApC,CAEA,mBAAO,aAAK,SAAS,CAAEtB,MAAM,CAACuB,YAAvB,wBACL,kCAAcD,MAAd,GADK,cAEL,aAAK,SAAS,CAAEtB,MAAM,CAACwB,iBAAvB,CAA0C,OAAO,CAAE,kBAAM,CAAElB,QAAQ,CAAC,iBAAD,CAAoB,CAAEmB,OAAO,CAAE,IAAX,CAAiBlB,KAAK,CAAE,CAAE,eAAgBG,YAAY,CAACO,SAAD,CAA9B,CAAxB,CAApB,CAAR,CAAoG,CAA/J,wBACE,oCACE,kCAAK,YAAK,GAAG,CAAEE,IAAI,CAAC,CAAD,CAAd,EAAL,EADF,cAEE,qBAAMC,KAAN,EAFF,GADF,cAKE,qBAAMC,KAAN,EALF,GAFK,GAA0CH,QAAQ,CAAGD,SAArD,CAAP,CAUD,CAbA,CAFI,cAgBL,aAAK,SAAS,CAAEjB,MAAM,CAAC0B,UAAvB,2BAAiDlB,QAAQ,CAACmB,MAA1D,GAhBK,GAAP,CAoBD,CArBD,CAwBA,mBAAO,aAAK,SAAS,CAAE3B,MAAM,CAAC4B,SAAvB,wBAEL,KAAC,OAAD,EAAS,KAAK,CAAC,iBAAf,EAFK,cAGL,YAAK,SAAS,CAAE5B,MAAM,CAAC6B,IAAvB,UACGrB,QAAQ,CAACmB,MAAT,CAAkB,CAAlB,cAAsB,KAAC,eAAD,IAAtB,CAA4C,EAD/C,EAHK,GAAP,CAQD"},"metadata":{},"sourceType":"module"}