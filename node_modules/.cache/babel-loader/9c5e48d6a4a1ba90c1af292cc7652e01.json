{"ast":null,"code":"import _defineProperty from \"/Users/stoneye/react_project/circle-app-react-hook/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _regeneratorRuntime from \"/Users/stoneye/react_project/circle-app-react-hook/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _slicedToArray from \"/Users/stoneye/react_project/circle-app-react-hook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { __awaiter } from \"tslib\";\nimport React, { forwardRef, useImperativeHandle, useRef, useState } from 'react';\nimport classNames from 'classnames';\nimport DotLoading from '../dot-loading';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { withNativeProps } from '../../utils/native-props';\nimport { isPromise } from '../../utils/validate';\nvar classPrefix = \"adm-button\";\nvar defaultProps = {\n  color: 'default',\n  fill: 'solid',\n  block: false,\n  loading: false,\n  loadingIcon: React.createElement(DotLoading, {\n    color: 'currentColor'\n  }),\n  type: 'button',\n  shape: 'default',\n  size: 'middle'\n};\nexport var Button = forwardRef(function (p, ref) {\n  var _classNames;\n\n  var props = mergeProps(defaultProps, p);\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      innerLoading = _useState2[0],\n      setInnerLoading = _useState2[1];\n\n  var nativeButtonRef = useRef(null);\n  var loading = props.loading === 'auto' ? innerLoading : props.loading;\n  var disabled = props.disabled || loading;\n  useImperativeHandle(ref, function () {\n    return {\n      get nativeElement() {\n        return nativeButtonRef.current;\n      }\n\n    };\n  });\n\n  var handleClick = function handleClick(e) {\n    return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var promise;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (props.onClick) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 2:\n              promise = props.onClick(e);\n\n              if (!isPromise(promise)) {\n                _context.next = 15;\n                break;\n              }\n\n              _context.prev = 4;\n              setInnerLoading(true);\n              _context.next = 8;\n              return promise;\n\n            case 8:\n              setInnerLoading(false);\n              _context.next = 15;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](4);\n              setInnerLoading(false);\n              throw _context.t0;\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[4, 11]]);\n    }));\n  };\n\n  return withNativeProps(props, React.createElement(\"button\", {\n    ref: nativeButtonRef,\n    type: props.type,\n    onClick: handleClick,\n    className: classNames(classPrefix, props.color ? \"\".concat(classPrefix, \"-\").concat(props.color) : null, (_classNames = {}, _defineProperty(_classNames, \"\".concat(classPrefix, \"-block\"), props.block), _defineProperty(_classNames, \"\".concat(classPrefix, \"-disabled\"), disabled), _defineProperty(_classNames, \"\".concat(classPrefix, \"-fill-outline\"), props.fill === 'outline'), _defineProperty(_classNames, \"\".concat(classPrefix, \"-fill-none\"), props.fill === 'none'), _defineProperty(_classNames, \"\".concat(classPrefix, \"-mini\"), props.size === 'mini'), _defineProperty(_classNames, \"\".concat(classPrefix, \"-small\"), props.size === 'small'), _defineProperty(_classNames, \"\".concat(classPrefix, \"-large\"), props.size === 'large'), _defineProperty(_classNames, \"\".concat(classPrefix, \"-loading\"), loading), _classNames), \"\".concat(classPrefix, \"-shape-\").concat(props.shape)),\n    disabled: disabled,\n    onMouseDown: props.onMouseDown,\n    onMouseUp: props.onMouseUp,\n    onTouchStart: props.onTouchStart,\n    onTouchEnd: props.onTouchEnd\n  }, loading ? React.createElement(\"div\", {\n    className: \"\".concat(classPrefix, \"-loading-wrapper\")\n  }, props.loadingIcon, props.loadingText) : React.createElement(\"span\", null, props.children)));\n});","map":{"version":3,"names":["__awaiter","React","forwardRef","useImperativeHandle","useRef","useState","classNames","DotLoading","mergeProps","withNativeProps","isPromise","classPrefix","defaultProps","color","fill","block","loading","loadingIcon","createElement","type","shape","size","Button","p","ref","props","innerLoading","setInnerLoading","nativeButtonRef","disabled","nativeElement","current","handleClick","e","onClick","promise","className","onMouseDown","onMouseUp","onTouchStart","onTouchEnd","loadingText","children"],"sources":["/Users/stoneye/react_project/circle-app-react-hook/node_modules/antd-mobile/es/components/button/button.js"],"sourcesContent":["import { __awaiter } from \"tslib\";\nimport React, { forwardRef, useImperativeHandle, useRef, useState } from 'react';\nimport classNames from 'classnames';\nimport DotLoading from '../dot-loading';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { withNativeProps } from '../../utils/native-props';\nimport { isPromise } from '../../utils/validate';\nconst classPrefix = `adm-button`;\nconst defaultProps = {\n  color: 'default',\n  fill: 'solid',\n  block: false,\n  loading: false,\n  loadingIcon: React.createElement(DotLoading, {\n    color: 'currentColor'\n  }),\n  type: 'button',\n  shape: 'default',\n  size: 'middle'\n};\nexport const Button = forwardRef((p, ref) => {\n  const props = mergeProps(defaultProps, p);\n  const [innerLoading, setInnerLoading] = useState(false);\n  const nativeButtonRef = useRef(null);\n  const loading = props.loading === 'auto' ? innerLoading : props.loading;\n  const disabled = props.disabled || loading;\n  useImperativeHandle(ref, () => ({\n    get nativeElement() {\n      return nativeButtonRef.current;\n    }\n\n  }));\n\n  const handleClick = e => __awaiter(void 0, void 0, void 0, function* () {\n    if (!props.onClick) return;\n    const promise = props.onClick(e);\n\n    if (isPromise(promise)) {\n      try {\n        setInnerLoading(true);\n        yield promise;\n        setInnerLoading(false);\n      } catch (e) {\n        setInnerLoading(false);\n        throw e;\n      }\n    }\n  });\n\n  return withNativeProps(props, React.createElement(\"button\", {\n    ref: nativeButtonRef,\n    type: props.type,\n    onClick: handleClick,\n    className: classNames(classPrefix, props.color ? `${classPrefix}-${props.color}` : null, {\n      [`${classPrefix}-block`]: props.block,\n      [`${classPrefix}-disabled`]: disabled,\n      [`${classPrefix}-fill-outline`]: props.fill === 'outline',\n      [`${classPrefix}-fill-none`]: props.fill === 'none',\n      [`${classPrefix}-mini`]: props.size === 'mini',\n      [`${classPrefix}-small`]: props.size === 'small',\n      [`${classPrefix}-large`]: props.size === 'large',\n      [`${classPrefix}-loading`]: loading\n    }, `${classPrefix}-shape-${props.shape}`),\n    disabled: disabled,\n    onMouseDown: props.onMouseDown,\n    onMouseUp: props.onMouseUp,\n    onTouchStart: props.onTouchStart,\n    onTouchEnd: props.onTouchEnd\n  }, loading ? React.createElement(\"div\", {\n    className: `${classPrefix}-loading-wrapper`\n  }, props.loadingIcon, props.loadingText) : React.createElement(\"span\", null, props.children)));\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}