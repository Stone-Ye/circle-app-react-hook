{"ast":null,"code":"import { useRef } from 'react';\nimport { useMemoizedFn, useUpdate } from 'ahooks';\nexport function usePropsValue(options) {\n  var value = options.value,\n      defaultValue = options.defaultValue,\n      onChange = options.onChange;\n  var update = useUpdate();\n  var stateRef = useRef(value !== undefined ? value : defaultValue);\n\n  if (value !== undefined) {\n    stateRef.current = value;\n  }\n\n  var setState = useMemoizedFn(function (v) {\n    var forceTrigger = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    // `forceTrigger` means trigger `onChange` even if `v` is the same as `stateRef.current`\n    var nextValue = typeof v === 'function' ? v(stateRef.current) : v;\n    if (!forceTrigger && nextValue === stateRef.current) return;\n    stateRef.current = nextValue;\n    update();\n    return onChange === null || onChange === void 0 ? void 0 : onChange(nextValue);\n  });\n  return [stateRef.current, setState];\n}","map":{"version":3,"names":["useRef","useMemoizedFn","useUpdate","usePropsValue","options","value","defaultValue","onChange","update","stateRef","undefined","current","setState","v","forceTrigger","nextValue"],"sources":["/Users/stoneye/react_project/circle-app-react-hook/node_modules/antd-mobile/es/utils/use-props-value.js"],"sourcesContent":["import { useRef } from 'react';\nimport { useMemoizedFn, useUpdate } from 'ahooks';\nexport function usePropsValue(options) {\n  const {\n    value,\n    defaultValue,\n    onChange\n  } = options;\n  const update = useUpdate();\n  const stateRef = useRef(value !== undefined ? value : defaultValue);\n\n  if (value !== undefined) {\n    stateRef.current = value;\n  }\n\n  const setState = useMemoizedFn((v, forceTrigger = false) => {\n    // `forceTrigger` means trigger `onChange` even if `v` is the same as `stateRef.current`\n    const nextValue = typeof v === 'function' ? v(stateRef.current) : v;\n    if (!forceTrigger && nextValue === stateRef.current) return;\n    stateRef.current = nextValue;\n    update();\n    return onChange === null || onChange === void 0 ? void 0 : onChange(nextValue);\n  });\n  return [stateRef.current, setState];\n}"],"mappings":"AAAA,SAASA,MAAT,QAAuB,OAAvB;AACA,SAASC,aAAT,EAAwBC,SAAxB,QAAyC,QAAzC;AACA,OAAO,SAASC,aAAT,CAAuBC,OAAvB,EAAgC;EACrC,IACEC,KADF,GAIID,OAJJ,CACEC,KADF;EAAA,IAEEC,YAFF,GAIIF,OAJJ,CAEEE,YAFF;EAAA,IAGEC,QAHF,GAIIH,OAJJ,CAGEG,QAHF;EAKA,IAAMC,MAAM,GAAGN,SAAS,EAAxB;EACA,IAAMO,QAAQ,GAAGT,MAAM,CAACK,KAAK,KAAKK,SAAV,GAAsBL,KAAtB,GAA8BC,YAA/B,CAAvB;;EAEA,IAAID,KAAK,KAAKK,SAAd,EAAyB;IACvBD,QAAQ,CAACE,OAAT,GAAmBN,KAAnB;EACD;;EAED,IAAMO,QAAQ,GAAGX,aAAa,CAAC,UAACY,CAAD,EAA6B;IAAA,IAAzBC,YAAyB,uEAAV,KAAU;IAC1D;IACA,IAAMC,SAAS,GAAG,OAAOF,CAAP,KAAa,UAAb,GAA0BA,CAAC,CAACJ,QAAQ,CAACE,OAAV,CAA3B,GAAgDE,CAAlE;IACA,IAAI,CAACC,YAAD,IAAiBC,SAAS,KAAKN,QAAQ,CAACE,OAA5C,EAAqD;IACrDF,QAAQ,CAACE,OAAT,GAAmBI,SAAnB;IACAP,MAAM;IACN,OAAOD,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAACQ,SAAD,CAAnE;EACD,CAP6B,CAA9B;EAQA,OAAO,CAACN,QAAQ,CAACE,OAAV,EAAmBC,QAAnB,CAAP;AACD"},"metadata":{},"sourceType":"module"}