{"ast":null,"code":"import _slicedToArray from \"/Users/stoneye/react_project/circle-app-react-hook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useRef, useEffect } from 'react';\nimport classNames from 'classnames';\nimport { animated, useSpring } from '@react-spring/web';\nimport { useThrottleFn } from 'ahooks';\nvar classPrefix = \"adm-scroll-mask\";\nexport var ScrollMask = function ScrollMask(props) {\n  var maskRef = useRef(null);\n\n  var _useSpring = useSpring(function () {\n    return {\n      leftMaskOpacity: 0,\n      rightMaskOpacity: 0,\n      config: {\n        clamp: true\n      }\n    };\n  }),\n      _useSpring2 = _slicedToArray(_useSpring, 2),\n      _useSpring2$ = _useSpring2[0],\n      leftMaskOpacity = _useSpring2$.leftMaskOpacity,\n      rightMaskOpacity = _useSpring2$.rightMaskOpacity,\n      api = _useSpring2[1];\n\n  var _useThrottleFn = useThrottleFn(function () {\n    var immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    var mask = maskRef.current;\n    if (!mask) return;\n    var scrollEl = props.scrollTrackRef.current;\n    if (!scrollEl) return;\n    var scrollLeft = scrollEl.scrollLeft;\n    var showLeftMask = scrollLeft > 0;\n    var showRightMask = scrollLeft + scrollEl.offsetWidth < scrollEl.scrollWidth;\n    api.start({\n      leftMaskOpacity: showLeftMask ? 1 : 0,\n      rightMaskOpacity: showRightMask ? 1 : 0,\n      immediate: immediate\n    });\n  }, {\n    wait: 100,\n    trailing: true,\n    leading: true\n  }),\n      updateMask = _useThrottleFn.run;\n\n  useEffect(function () {\n    updateMask(true);\n  }, []);\n  useEffect(function () {\n    var scrollEl = props.scrollTrackRef.current;\n    if (!scrollEl) return;\n    scrollEl.addEventListener('scroll', updateMask);\n    return function () {\n      return scrollEl.removeEventListener('scroll', updateMask);\n    };\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(animated.div, {\n    ref: maskRef,\n    className: classNames(classPrefix, \"\".concat(classPrefix, \"-left\")),\n    style: {\n      opacity: leftMaskOpacity\n    }\n  }), React.createElement(animated.div, {\n    className: classNames(classPrefix, \"\".concat(classPrefix, \"-right\")),\n    style: {\n      opacity: rightMaskOpacity\n    }\n  }));\n};","map":{"version":3,"names":["React","useRef","useEffect","classNames","animated","useSpring","useThrottleFn","classPrefix","ScrollMask","props","maskRef","leftMaskOpacity","rightMaskOpacity","config","clamp","api","immediate","mask","current","scrollEl","scrollTrackRef","scrollLeft","showLeftMask","showRightMask","offsetWidth","scrollWidth","start","wait","trailing","leading","updateMask","run","addEventListener","removeEventListener","createElement","Fragment","div","ref","className","style","opacity"],"sources":["/Users/stoneye/react_project/circle-app-react-hook/node_modules/antd-mobile/es/components/scroll-mask/scroll-mask.js"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport classNames from 'classnames';\nimport { animated, useSpring } from '@react-spring/web';\nimport { useThrottleFn } from 'ahooks';\nconst classPrefix = `adm-scroll-mask`;\nexport const ScrollMask = props => {\n  const maskRef = useRef(null);\n  const [{\n    leftMaskOpacity,\n    rightMaskOpacity\n  }, api] = useSpring(() => ({\n    leftMaskOpacity: 0,\n    rightMaskOpacity: 0,\n    config: {\n      clamp: true\n    }\n  }));\n  const {\n    run: updateMask\n  } = useThrottleFn((immediate = false) => {\n    const mask = maskRef.current;\n    if (!mask) return;\n    const scrollEl = props.scrollTrackRef.current;\n    if (!scrollEl) return;\n    const scrollLeft = scrollEl.scrollLeft;\n    const showLeftMask = scrollLeft > 0;\n    const showRightMask = scrollLeft + scrollEl.offsetWidth < scrollEl.scrollWidth;\n    api.start({\n      leftMaskOpacity: showLeftMask ? 1 : 0,\n      rightMaskOpacity: showRightMask ? 1 : 0,\n      immediate\n    });\n  }, {\n    wait: 100,\n    trailing: true,\n    leading: true\n  });\n  useEffect(() => {\n    updateMask(true);\n  }, []);\n  useEffect(() => {\n    const scrollEl = props.scrollTrackRef.current;\n    if (!scrollEl) return;\n    scrollEl.addEventListener('scroll', updateMask);\n    return () => scrollEl.removeEventListener('scroll', updateMask);\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(animated.div, {\n    ref: maskRef,\n    className: classNames(classPrefix, `${classPrefix}-left`),\n    style: {\n      opacity: leftMaskOpacity\n    }\n  }), React.createElement(animated.div, {\n    className: classNames(classPrefix, `${classPrefix}-right`),\n    style: {\n      opacity: rightMaskOpacity\n    }\n  }));\n};"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,MAAhB,EAAwBC,SAAxB,QAAyC,OAAzC;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,mBAApC;AACA,SAASC,aAAT,QAA8B,QAA9B;AACA,IAAMC,WAAW,oBAAjB;AACA,OAAO,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAAAC,KAAK,EAAI;EACjC,IAAMC,OAAO,GAAGT,MAAM,CAAC,IAAD,CAAtB;;EACA,iBAGUI,SAAS,CAAC;IAAA,OAAO;MACzBM,eAAe,EAAE,CADQ;MAEzBC,gBAAgB,EAAE,CAFO;MAGzBC,MAAM,EAAE;QACNC,KAAK,EAAE;MADD;IAHiB,CAAP;EAAA,CAAD,CAHnB;EAAA;EAAA;EAAA,IACEH,eADF,gBACEA,eADF;EAAA,IAEEC,gBAFF,gBAEEA,gBAFF;EAAA,IAGGG,GAHH;;EAUA,qBAEIT,aAAa,CAAC,YAAuB;IAAA,IAAtBU,SAAsB,uEAAV,KAAU;IACvC,IAAMC,IAAI,GAAGP,OAAO,CAACQ,OAArB;IACA,IAAI,CAACD,IAAL,EAAW;IACX,IAAME,QAAQ,GAAGV,KAAK,CAACW,cAAN,CAAqBF,OAAtC;IACA,IAAI,CAACC,QAAL,EAAe;IACf,IAAME,UAAU,GAAGF,QAAQ,CAACE,UAA5B;IACA,IAAMC,YAAY,GAAGD,UAAU,GAAG,CAAlC;IACA,IAAME,aAAa,GAAGF,UAAU,GAAGF,QAAQ,CAACK,WAAtB,GAAoCL,QAAQ,CAACM,WAAnE;IACAV,GAAG,CAACW,KAAJ,CAAU;MACRf,eAAe,EAAEW,YAAY,GAAG,CAAH,GAAO,CAD5B;MAERV,gBAAgB,EAAEW,aAAa,GAAG,CAAH,GAAO,CAF9B;MAGRP,SAAS,EAATA;IAHQ,CAAV;EAKD,CAbgB,EAad;IACDW,IAAI,EAAE,GADL;IAEDC,QAAQ,EAAE,IAFT;IAGDC,OAAO,EAAE;EAHR,CAbc,CAFjB;EAAA,IACOC,UADP,kBACEC,GADF;;EAoBA7B,SAAS,CAAC,YAAM;IACd4B,UAAU,CAAC,IAAD,CAAV;EACD,CAFQ,EAEN,EAFM,CAAT;EAGA5B,SAAS,CAAC,YAAM;IACd,IAAMiB,QAAQ,GAAGV,KAAK,CAACW,cAAN,CAAqBF,OAAtC;IACA,IAAI,CAACC,QAAL,EAAe;IACfA,QAAQ,CAACa,gBAAT,CAA0B,QAA1B,EAAoCF,UAApC;IACA,OAAO;MAAA,OAAMX,QAAQ,CAACc,mBAAT,CAA6B,QAA7B,EAAuCH,UAAvC,CAAN;IAAA,CAAP;EACD,CALQ,EAKN,EALM,CAAT;EAMA,OAAO9B,KAAK,CAACkC,aAAN,CAAoBlC,KAAK,CAACmC,QAA1B,EAAoC,IAApC,EAA0CnC,KAAK,CAACkC,aAAN,CAAoB9B,QAAQ,CAACgC,GAA7B,EAAkC;IACjFC,GAAG,EAAE3B,OAD4E;IAEjF4B,SAAS,EAAEnC,UAAU,CAACI,WAAD,YAAiBA,WAAjB,WAF4D;IAGjFgC,KAAK,EAAE;MACLC,OAAO,EAAE7B;IADJ;EAH0E,CAAlC,CAA1C,EAMHX,KAAK,CAACkC,aAAN,CAAoB9B,QAAQ,CAACgC,GAA7B,EAAkC;IACpCE,SAAS,EAAEnC,UAAU,CAACI,WAAD,YAAiBA,WAAjB,YADe;IAEpCgC,KAAK,EAAE;MACLC,OAAO,EAAE5B;IADJ;EAF6B,CAAlC,CANG,CAAP;AAYD,CArDM"},"metadata":{},"sourceType":"module"}