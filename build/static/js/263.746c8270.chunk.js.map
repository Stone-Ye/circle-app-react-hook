{"version":3,"file":"static/js/263.746c8270.chunk.js","mappings":"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","sources":["webpack://cicle-app/./src/views/Buy/index.module.css?5c41","views/Buy/index.js","webpack://cicle-app/./src/views/Component/HeadNav/index.module.css?c2c9","views/Component/HeadNav/index.js","views/Utils/global.js","views/Utils/time.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Buy_container__Kl+Ek\",\"bodyCard1\":\"Buy_bodyCard1__C36No\",\"bodyCard2\":\"Buy_bodyCard2__yyfJO\",\"askingPrice\":\"Buy_askingPrice__lIYXO\",\"yourOffer\":\"Buy_yourOffer__oGnFj\",\"bottom\":\"Buy_bottom__mCil9\"};","import React, { useEffect, useState } from 'react'\nimport {\n  useNavigate, useLocation\n} from 'react-router-dom'\n\nimport { Space, Modal, Radio, TextArea, Input, Form, Button } from 'antd-mobile'\nimport styles from './index.module.css'\n\nimport { getAllUserInfos, updateAllUserInfos, getUserName } from '../Utils/global'\nimport { getCurrentTime } from '../Utils/time'\nimport HeadNav from '../Component/HeadNav'\n\nexport default function Buy () {\n  const navigate = useNavigate()\n  const { state } = useLocation()\n  console.log(\"buy: state: \", state)\n\n\n  // address infos\n  const [deliveryAddress, setDeliveryAddress] = useState('')\n\n  // pickup face-to-face;   delivery\n  const [isPickOrDelivery, setIsPickOrDelivery] = useState('pickup')\n\n\n\n\n\n  const onComfirmedCallback = ({ offerPrice }) => {\n\n    const { productInfos } = state\n    const { productId, category, imgs, title, price, desc, seller } = productInfos\n\n    Modal.confirm({\n      content: 'Your Offer is Completed !',\n      confirmText: 'Continue Shopping',\n      cancelText: 'Offer History',\n      onConfirm: () => {\n        navigate('/home')\n      },\n      onCancel: () => navigate('/offerhistory')\n    })\n\n    let allUserInfos = getAllUserInfos()\n    let curUsername = getUserName()\n    console.log(\"buy allUserInfos[seller]['offers'].length:\", allUserInfos[curUsername]['offers'].length)\n\n\n\n    // add an offer record for curusername (buyer)\n    let curtime = getCurrentTime()\n    let newOfferObj = {\n      'productId': productId,\n      'offerPrice': offerPrice,\n      'time': curtime,\n      'itemId': allUserInfos[curUsername]['offers'].length,\n      'stepInfos': { 'status': 0, 'time': curtime },   //0: waiting，1:agree, 2:rejected\n      'isValid': 1 // 1:valid，2:not valid \n    }\n    // add an order record for seller\n    let newOrderObj = {\n      'buyer': getUserName(),\n      'productId': productId,\n      'offerPrice': offerPrice,\n      'time': curtime,\n      'isPickOrDelivery': isPickOrDelivery,\n      'deliveryAddress': deliveryAddress,\n      'status': 0,\n      'offerId': allUserInfos[curUsername]['offers'].length,\n      'itemId': allUserInfos[seller]['orders'].length,\n      'isValid': 1 // 1有效，2无效\n\n    }\n\n    allUserInfos[curUsername]['offers'].push(newOfferObj)\n    allUserInfos[seller]['orders'].push(newOrderObj)\n    updateAllUserInfos(allUserInfos)\n\n\n  }\n\n\n\n  if (!state) return <></>\n\n\n\n\n  const { productInfos } = state\n  console.log(\"productInfos: \", productInfos)\n  const { imgs, title, price } = productInfos\n\n  return <div className={styles.container}>\n\n    <HeadNav title='Place an Offer' />\n    <div className={styles.body}>\n      <div className={styles.bodyCard1}>\n        <div>\n          <img src={imgs[0]} />\n        </div>\n        <div>\n          <div>{title}</div>\n          <div>{price}</div>\n        </div>\n      </div>\n\n      <div className={styles.bodyCard2}>\n        <div>\n          Delivery Address\n        </div>\n        <div>\n          <div>\n            <Radio.Group defaultValue='pickup' onChange={(val) => setIsPickOrDelivery(val)}>\n              <Space direction='vertical'>\n                <Radio value='pickup' style={{\n                  '--icon-size': '18px',\n                  '--font-size': '14px',\n                  '--gap': '10px',\n                }}>Pick up face-to-face (If you choose\n                  this option, please talk to seller first.)</Radio>\n                <Radio value='delivery' style={{\n                  '--icon-size': '18px',\n                  '--font-size': '14px',\n                  '--gap': '10px',\n                }}>Delivery</Radio>\n              </Space>\n            </Radio.Group>\n          </div>\n\n          <div>\n            <TextArea defaultValue={'Please type your address'} value={deliveryAddress} onChange={val => setDeliveryAddress(val)} style={{ '--font-size': '10px' }} showCount />\n          </div>\n\n        </div>\n      </div>\n\n    </div>\n\n\n    <div className={styles.bottom}>\n      <div className={styles.form}></div>\n      <Form\n        layout='horizontal'\n        onFinish={(value) => onComfirmedCallback(value)}\n        footer={\n          <Button block type='submit' color='primary' size='large'>\n            Comfirmed Offer\n          </Button>\n        }\n      >\n        <Form.Item\n          label='Asking Price'\n          name='askingPrice'\n          extra={<a>{price}</a>}\n        // rules={[{ required: true, message: 'Asking Price must be required' }]}\n        >\n        </Form.Item>\n        <Form.Item\n          label='Offer Price'\n          name='offerPrice'\n          rules={[{ required: true, message: 'Offer Price must be required' }]}\n        >\n          <Input onChange={console.log} placeholder='Input the offer price' />\n        </Form.Item>\n      </Form>\n\n\n\n\n    </div>\n\n  </div>\n\n}","// extracted by mini-css-extract-plugin\nexport default {\"top_nav\":\"HeadNav_top_nav__ZUJ2B\"};","\nimport { NavBar } from 'antd-mobile'\nimport styles from './index.module.css'\nimport {\n  useNavigate,\n  useLocation\n} from 'react-router-dom'\n\nexport default function HeadNav ({ title }) {\n  const navigate = useNavigate()\n  const location = useLocation()\n\n  return <div className={styles.top_nav}>\n    <NavBar onBack={() => {\n      // console.log(\"location: \", location)\n      // if (['/messagedetails', '/home', '/productDetails'].includes(location.pathname)) {\n      //   navigate('/home')\n      // }\n      // else\n      //   navigate(-1)\n      navigate('/home')\n    }} >{title}</NavBar>\n  </div>\n\n}","\nconst getUserName = () => localStorage.getItem('userName')\nconst setUserName = (value) => localStorage.setItem('userName', value)\nconst removeUserName = () => localStorage.removeItem('userName')\nconst isAuth = () => !!getUserName()\nconst getAllUserInfos = () => JSON.parse(localStorage.getItem('allUserInfos'))\nconst updateAllUserInfos = (value) => localStorage.setItem('allUserInfos', JSON.stringify(value))\nconst getProductsData = () => JSON.parse(localStorage.getItem('productsData'))\nconst updateProductsData = (value) => localStorage.setItem('productsData', JSON.stringify(value))\nconst getCurrentUserInfos = () => JSON.parse(localStorage.getItem('allUserInfos'))[getUserName()]\nconst getCategorysData = () => JSON.parse(localStorage.getItem('categorysData'))\nconst getAllProductCommentInfos = () => JSON.parse(localStorage.getItem('allProductCommentInfos'))\nconst updateAllProductCommentInfos = (value) => localStorage.setItem('allProductCommentInfos', JSON.stringify(value))\nconst getCurProductCommentInfosById = (id) => JSON.parse(localStorage.getItem('allProductCommentInfos'))[id]\nconst getCurrentProduct = (id) => getProductsData()[id]\nexport {\n  getUserName,\n  setUserName,\n  removeUserName,\n  isAuth,\n  getAllUserInfos,\n  getProductsData,\n  getCurrentProduct,\n  updateProductsData,\n  updateAllUserInfos,\n  getCurrentUserInfos,\n  getAllProductCommentInfos,\n  updateAllProductCommentInfos,\n  getCurProductCommentInfosById,\n  getCategorysData\n}\n\n\n","/**\n * HH:MM yyyy/MM/dd \n */\nfunction getCurrentTime () {\n  var date = new Date()\n  var month = zeroFill(date.getMonth() + 1)\n  var day = zeroFill(date.getDate())\n  var hour = zeroFill(date.getHours())\n  var minute = zeroFill(date.getMinutes())\n  // var second = zeroFill(date.getSeconds())\n\n  var curTime = hour + \":\" + minute + \" \" + day + \"/\" + month + \"/\" + date.getFullYear()\n\n  return curTime\n}\n\n\n/**\n *  yyyy/MM/dd HH:MM\n */\nfunction getCurrentTimeFromYear2min () {\n  var date = new Date()\n  var month = zeroFill(date.getMonth() + 1)\n  var day = zeroFill(date.getDate())\n  var hour = zeroFill(date.getHours())\n  var minute = zeroFill(date.getMinutes())\n\n  var curTime = date.getFullYear() + \"/\" + month + \"/\" + day + \" \" + hour + \":\" + minute\n\n  return curTime\n}\n\n\n\n/**\n* fill 0\n*/\nfunction zeroFill (i) {\n  if (i >= 0 && i <= 9) {\n    return \"0\" + i\n  } else {\n    return i\n  }\n}\n\n\n\n\nexport { getCurrentTime, getCurrentTimeFromYear2min }"],"names":["Buy","navigate","useNavigate","state","useLocation","console","log","useState","deliveryAddress","setDeliveryAddress","isPickOrDelivery","setIsPickOrDelivery","productInfos","imgs","title","price","className","styles","HeadNav","src","defaultValue","onChange","val","direction","value","style","showCount","layout","onFinish","offerPrice","productId","seller","category","desc","Modal","content","confirmText","cancelText","onConfirm","onCancel","allUserInfos","getAllUserInfos","curUsername","getUserName","length","curtime","getCurrentTime","newOfferObj","newOrderObj","push","updateAllUserInfos","onComfirmedCallback","footer","block","type","color","size","label","name","extra","rules","required","message","placeholder","onBack","localStorage","getItem","setUserName","setItem","removeUserName","removeItem","isAuth","JSON","parse","stringify","getProductsData","updateProductsData","getCurrentUserInfos","getCategorysData","getAllProductCommentInfos","updateAllProductCommentInfos","getCurrentProduct","id","date","Date","month","zeroFill","getMonth","day","getDate","getHours","getMinutes","getFullYear","getCurrentTimeFromYear2min","hour","minute","i"],"sourceRoot":""}