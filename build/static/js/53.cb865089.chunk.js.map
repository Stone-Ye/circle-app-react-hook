{"version":3,"file":"static/js/53.cb865089.chunk.js","mappings":"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","sources":["webpack://cicle-app/./src/views/Component/HeadNav/index.module.css?c2c9","views/Component/HeadNav/index.js","webpack://cicle-app/./src/views/Post/index.module.css?be59","views/Post/index.js","views/Utils/global.js","views/Utils/uploadImg.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"top_nav\":\"HeadNav_top_nav__ZUJ2B\"};","\nimport { NavBar } from 'antd-mobile'\nimport styles from './index.module.css'\nimport {\n  useNavigate,\n  useLocation\n} from 'react-router-dom'\n\nexport default function HeadNav ({ title }) {\n  const navigate = useNavigate()\n  const location = useLocation()\n\n  return <div className={styles.top_nav}>\n    <NavBar onBack={() => {\n      // console.log(\"location: \", location)\n      // if (['/messagedetails', '/home', '/productDetails'].includes(location.pathname)) {\n      //   navigate('/home')\n      // }\n      // else\n      //   navigate(-1)\n      navigate('/home')\n    }} >{title}</NavBar>\n  </div>\n\n}","// extracted by mini-css-extract-plugin\nexport default {\"bodyForm\":\"Post_bodyForm__ft6HX\"};","import React, { useRef, useState, useEffect } from 'react'\nimport {\n  Form, Input, Button, TextArea, SideBar, ImageUploader, Dropdown, Toast\n} from 'antd-mobile'\nimport { useNavigate } from 'react-router-dom'\nimport { getCategorysData, getProductsData, updateProductsData, getUserName, getAllUserInfos, updateAllUserInfos } from '../Utils/global'\nimport styles from './index.module.css'\nimport { UploadImg } from '../Utils/uploadImg'\nimport HeadNav from '../Component/HeadNav'\n\n\n\nexport default function Post () {\n\n  const navigate = useNavigate()\n  const ref = useRef(null)\n  const [categorysData, setCategorysData] = useState([])\n  const [isShowSelectCategory, setIsShowSelectCategory] = useState(false)\n  const [curActiveIndex, setCurActiveIndex] = useState(1)\n\n\n\n  useEffect(() => {\n    setCategorysData(getCategorysData())\n  }, [])\n\n  const submitCallback = (values) => {\n    console.log('Todo form values: ', values)\n    let formdataDict = {\n      'productId': '', 'productId': '', 'imgs': [], 'title': '', 'price': '', 'desc': '', 'seller': '', 'viewCount': 0\n    }\n\n    let productsData = getProductsData()\n    let curUserName = getUserName()\n    let allUserInfos = getAllUserInfos()\n    let newProductId = productsData.length\n\n\n    formdataDict.productId = newProductId\n    formdataDict.category = categorysData[curActiveIndex - 1].title\n    formdataDict.price = values.price\n    formdataDict.desc = values.desc\n    formdataDict.imgs = values.img.map((value) => value.url)\n    formdataDict.title = values.name\n    formdataDict.seller = curUserName\n\n\n    allUserInfos[curUserName]['postList'].push(newProductId)\n    updateProductsData([...productsData, formdataDict])\n    updateAllUserInfos(allUserInfos)\n    Toast.show({\n      content: 'Post product is successful',\n      afterClose: () => {\n        navigate('/home', { replace: true })\n      },\n    })\n\n\n\n  }\n\n\n  const onChangeCallback = (ref, index) => {\n    console.log('onChangeCallback index:', index)\n    setCurActiveIndex(index)\n    setIsShowSelectCategory(false)\n    ref.current?.close()\n  }\n\n  return <div className={styles.containerPost}>\n    <HeadNav title='Post' />\n\n    <div className={styles.bodyForm}>\n      <Form\n        name='form'\n        onFinish={submitCallback}\n        footer={\n          <Button block type='submit' color='primary' size='large'>\n            提交\n          </Button>\n        }\n      >\n        <Form.Item name='name' label='ProductsName' rules={[{ required: true }]}>\n          <Input placeholder='productsName' />\n        </Form.Item>\n\n        <Form.Item name='category' label='Category' >\n          <Dropdown onChange={() => setIsShowSelectCategory(true)} ref={ref}>\n            {curActiveIndex != 1 ? categorysData[curActiveIndex - 1].title : 'Sport & Hobby'}\n            <Dropdown.Item key='sorter' title='' >\n              {isShowSelectCategory ? <div >\n                <SideBar activeKey={curActiveIndex} onChange={(index) => onChangeCallback(ref, index)}>\n                  {categorysData.map(item => (\n                    <SideBar.Item key={item.categoryId}\n                      title={item.title}\n                    />\n                  ))}\n                </SideBar>\n              </div> : null}\n            </Dropdown.Item>\n          </Dropdown>\n\n        </Form.Item>\n\n        <Form.Item name='price' label='Price' rules={[{ required: true }]}>\n          <Input placeholder='price ' />\n        </Form.Item>\n\n        <Form.Item name='desc' label='Description' >\n          <TextArea placeholder='description ' />\n        </Form.Item>\n\n        <Form.Item name='img' label='Upload Images' rules={[{ required: true }]}>\n          <ImageUploader\n            upload={UploadImg}\n            maxCount={3}\n            multiple={true}\n          />\n        </Form.Item>\n\n      </Form>\n    </div>\n\n  </div >\n}\n","\nconst getUserName = () => localStorage.getItem('userName')\nconst setUserName = (value) => localStorage.setItem('userName', value)\nconst removeUserName = () => localStorage.removeItem('userName')\nconst isAuth = () => !!getUserName()\nconst getAllUserInfos = () => JSON.parse(localStorage.getItem('allUserInfos'))\nconst updateAllUserInfos = (value) => localStorage.setItem('allUserInfos', JSON.stringify(value))\nconst getProductsData = () => JSON.parse(localStorage.getItem('productsData'))\nconst updateProductsData = (value) => localStorage.setItem('productsData', JSON.stringify(value))\nconst getCurrentUserInfos = () => JSON.parse(localStorage.getItem('allUserInfos'))[getUserName()]\nconst getCategorysData = () => JSON.parse(localStorage.getItem('categorysData'))\nconst getAllProductCommentInfos = () => JSON.parse(localStorage.getItem('allProductCommentInfos'))\nconst updateAllProductCommentInfos = (value) => localStorage.setItem('allProductCommentInfos', JSON.stringify(value))\nconst getCurProductCommentInfosById = (id) => JSON.parse(localStorage.getItem('allProductCommentInfos'))[id]\nconst getCurrentProduct = (id) => getProductsData()[id]\nexport {\n  getUserName,\n  setUserName,\n  removeUserName,\n  isAuth,\n  getAllUserInfos,\n  getProductsData,\n  getCurrentProduct,\n  updateProductsData,\n  updateAllUserInfos,\n  getCurrentUserInfos,\n  getAllProductCommentInfos,\n  updateAllProductCommentInfos,\n  getCurProductCommentInfosById,\n  getCategorysData\n}\n\n\n","\nimport axios from \"axios\"\n\nconst UploadImg = async (file) => {\n  const formData = new FormData()\n  formData.append('file', file)\n  let res = await axios.post('http://139.199.86.158:8100/upload/singleImage', formData)\n  console.log(\"res: \", res)\n  let responseUrl = res ? res.data.data : ''\n  console.log(\"responseUrl: \", responseUrl)\n  return { url: responseUrl }\n}\n\nexport { UploadImg }"],"names":["HeadNav","title","navigate","useNavigate","useLocation","className","styles","onBack","Post","ref","useRef","useState","categorysData","setCategorysData","isShowSelectCategory","setIsShowSelectCategory","curActiveIndex","setCurActiveIndex","useEffect","getCategorysData","name","onFinish","values","console","log","formdataDict","productsData","getProductsData","curUserName","getUserName","allUserInfos","getAllUserInfos","newProductId","length","productId","category","price","desc","imgs","img","map","value","url","seller","push","updateProductsData","updateAllUserInfos","Toast","content","afterClose","replace","footer","block","type","color","size","label","rules","required","placeholder","onChange","activeKey","index","current","close","onChangeCallback","item","categoryId","upload","UploadImg","maxCount","multiple","localStorage","getItem","setUserName","setItem","removeUserName","removeItem","isAuth","JSON","parse","stringify","getCurrentUserInfos","getAllProductCommentInfos","updateAllProductCommentInfos","getCurrentProduct","id","file","formData","FormData","append","axios","res","responseUrl","data"],"sourceRoot":""}